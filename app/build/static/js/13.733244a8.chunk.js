(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[13],{521:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(6),r=a(55),c=a.n(r),l=a(63),o=a(38),i=a(1),b=a.n(i),u=a(5),d=a(39),p=a(40),j=a(56),m=a(64);t.default=function(e){var t=Object(i.useState)(!1),a=Object(o.a)(t,2),r=a[0],h=a[1],O=Object(i.useState)(!1),x=Object(o.a)(O,2),f=x[0],v=x[1],y=Object(i.useState)({description:"",layout:{seats:[]}}),g=Object(o.a)(y,2),k=g[0],N=g[1],w=Object(i.useState)({}),S=Object(o.a)(w,2),C=S[0],F=S[1],I=Object(i.useState)(""),L=Object(o.a)(I,2),A=L[0],E=L[1],J=Object(i.useState)(4),D=Object(o.a)(J,2),P=D[0],V=D[1],q=Object(u.f)(),z=e.match.params.id,B={headers:{"x-access-token":localStorage.getItem("token")}};Object(i.useEffect)((function(){"novo"!==z&&function(){var e=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("/buses/".concat(z),{headers:{"x-access-token":localStorage.getItem("token")}});case 3:t=e.sent,N(t.data),V(t.data.layout.seats.length),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),(a=Object(m.a)(e.t0)).forbidden?q.push("/"):a.general&&E(a.error);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[z,q]);var G=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(P+1),(t=k.layout.seats).push(0),N(Object(s.a)(Object(s.a)({},k),{},{layout:{seats:t}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),F({}),e.prev=2,"novo"===z){e.next=8;break}return e.next=6,j.a.put("/buses/".concat(z),k,B);case 6:e.next=10;break;case 8:return e.next=10,j.a.post("/buses",k,B);case 10:q.push("/onibus"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),h(!1),(t=Object(m.a)(e.t0)).general?E(t.error):F(t.error);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,j.a.delete("/buses/".concat(z),B);case 4:q.push("/onibus"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),(t=Object(m.a)(e.t0)).general?E(t.error):F(t.error);case 11:h(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(b.a.Fragment,{children:[Object(n.jsx)(d.a,{}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2",children:[Object(n.jsx)(p.a,{}),Object(n.jsx)("h5",{children:"Cadastro de \xf4nibus"}),Object(n.jsxs)("form",{className:"row g-3 mt-1 mb-4",children:[Object(n.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:A?{display:"block"}:{display:"none"},children:A}),Object(n.jsxs)("div",{className:"col-md-12",children:[Object(n.jsx)("label",{htmlFor:"description",className:"form-label",children:"Descri\xe7\xe3o"}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(C.description?"is-invalid":""),id:"description",maxLength:"255",value:k.description||"",onChange:function(e){N(Object(s.a)(Object(s.a)({},k),{},{description:e.target.value}))}}),Object(n.jsx)("div",{id:"validationName",className:"invalid-feedback",style:C.description?{display:"inline"}:{display:"none"},children:C.description})]}),Object(n.jsxs)("div",{className:"col-md-2",children:[Object(n.jsx)("label",{htmlFor:"layout",className:"form-label",children:"Layout"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:G,children:"Adicionar Poltrona"})]}),Object(n.jsx)("div",{className:"col-lg-6 col-xl-4",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("label",{htmlFor:"layout",className:"form-label",children:"Informe o n\xfamero das poltronas"}),Array.from({length:P},(function(e,t){return Object(n.jsx)("div",{className:"col-3 mb-1",children:Object(n.jsx)("input",{type:"number",className:"form-control",maxLength:"2",value:k.layout.seats[t]||"",onChange:function(e){var a=k.layout.seats;a[t]=parseInt(e.target.value),N(Object(s.a)(Object(s.a)({},k),{},{layout:{seats:a}}))}})},t)}))]})})]}),Object(n.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(n.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:H,disabled:r,children:[Object(n.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:r?{display:"inline-block"}:{display:"none"}}),"Salvar"]}),Object(n.jsxs)("button",{type:"button",className:"btn btn-primary",style:"novo"!==z?{display:"inline-block"}:{display:"none"},onClick:K,disabled:f,children:[Object(n.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:f?{display:"inline-block"}:{display:"none"}}),"Excluir"]}),Object(n.jsx)("button",{type:"button",className:"btn btn-warning text-white mb-4",onClick:function(){q.push("/onibus")},children:"Voltar"})]})]})})]})}}}]);
//# sourceMappingURL=13.733244a8.chunk.js.map