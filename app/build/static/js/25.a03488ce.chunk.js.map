{"version":3,"sources":["config/api.js","config/handleErrors.js","components/user/EmailResetPassword.js"],"names":["apiUrl","process","api","axios","create","baseURL","apiCep","cep","get","errorApi","error","hasOwnProperty","response","forbidden","status","data","message","general","toString","EmailResetPassword","useState","email","setEmail","setMessage","loading","setLoading","history","useHistory","handleEmailResetPassword","a","domain","window","location","hostname","post","res","errorHandled","push","className","role","style","display","htmlFor","type","id","maxLength","value","onChange","e","key","target","onClick","disabled","aria-hidden"],"mappings":"6FAAA,4HAEMA,EAASC,6BAETC,EAAMC,IAAMC,OAAO,CACvBC,QAASL,IAGLM,EAAS,SAAAC,GAAG,OAAKJ,IAAMK,IAAN,mCAAsCD,EAAtC,a,iCCRvB,sCAAME,EAAW,SAACC,GAChB,GAAIA,EAAMC,eAAe,aAAeD,EAAME,SAAU,CAEtD,IAAIC,GAAY,EAOhB,OALEA,KADEH,EAAME,SAASD,eAAe,YAAaD,EAAME,SAASE,SACtB,MAA1BJ,EAAME,SAASE,OAKzBJ,EAAME,SAASD,eAAe,SAAWD,EAAME,SAASG,KACtDL,EAAME,SAASG,KAAKJ,eAAe,YAAcD,EAAME,SAASG,KAAKC,QAChE,CAAEC,SAAS,EAAMP,MAAOA,EAAME,SAASG,KAAKC,QAASH,aAErD,CAAEI,SAAS,EAAOP,MAAOA,EAAME,SAASG,KAAMF,aAGhD,CAAEI,SAAS,EAAMP,MAAO,oDAAqDG,aAGtF,MAAyB,yBAArBH,EAAMQ,WACD,CAAED,SAAS,EAAMP,MAAM,oDAAkDG,WAAW,GAEpF,CAAEI,SAAS,EAAMP,MAAM,oDAAqDG,WAAW,K,8HCqErFM,UAvFf,WAA+B,IAAD,EACFC,mBAAS,IADP,mBACrBC,EADqB,KACdC,EADc,OAEEF,mBAAS,IAFX,mBAErBJ,EAFqB,KAEZO,EAFY,OAGEH,oBAAS,GAHX,mBAGrBI,EAHqB,KAGZC,EAHY,KAKxBC,EAAUC,cAERC,EAAwB,uCAAG,gCAAAC,EAAA,sEAE7BJ,GAAW,GACLK,EAASC,OAAOC,SAASC,SAHF,SAIX/B,IAAIgC,KAAJ,iDAAmDJ,GAAUT,GAJlD,OAIvBc,EAJuB,OAK7BZ,EAAW,CACTF,MAAQc,EAAIpB,KAAKM,MACjBX,OAAQ,IAEVe,GAAW,GATkB,mDAWvBW,EAAe3B,YAAS,EAAD,KACZI,UACfa,EAAQW,KAAK,KAEbd,EAAW,2BAAKa,EAAa1B,OAAnB,IAA0BA,OAAO,KAE7Ce,GAAW,GAjBkB,0DAAH,qDAqB9B,OACE,qBAAKa,UAAU,4BAAf,SACE,iCACE,qBAAKA,UAAS,4BAAuBtB,EAAQN,MAAQ,eAAiB,iBAClE6B,KAAK,QACLC,MAAOxB,EAAQK,MAAQ,CAAEoB,QAAS,SAAW,CAAEA,QAAU,QAF7D,SAGGzB,EAAQK,QAGX,qBAAKiB,UAAU,mBAAf,SACE,mGAKF,sBAAKA,UAAU,OAAf,UACE,uBAAOI,QAAQ,QACRJ,UAAU,aADjB,mBAIA,uBAAQK,KAAK,QACLL,UAAU,eACVM,GAAG,QACHC,UAAU,MACVC,MAAOzB,EAAMA,OAAS,GACtB0B,SAAU,SAACC,GACT,IAAMC,EAAMD,EAAEE,OAAOJ,MACrBxB,EAAS,CACPD,MAAO4B,UAMrB,sBAAKX,UAAU,2BAAf,UACE,yBAAQK,KAAK,SACLL,UAAU,kBACVa,QAASvB,EACTwB,SAAU5B,EAHlB,UAIE,sBAAMc,UAAU,wCACVC,KAAK,SACLc,cAAY,OACZb,MAAOhB,EAAU,CAAEiB,QAAS,gBAAkB,CAAEA,QAAU,UAPlE,YAWA,wBAAQE,KAAK,SACLL,UAAU,6BACVa,QAAS,WACPzB,EAAQW,KAAK,MAHvB","file":"static/js/25.a03488ce.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL\r\n\r\nconst api = axios.create({\r\n  baseURL: apiUrl\r\n})\r\n\r\nconst apiCep = cep => (axios.get(`https://viacep.com.br/ws/${cep}/json/`))\r\n\r\nexport { api, apiCep, apiUrl }","const errorApi = (error) => {\r\n  if (error.hasOwnProperty('response') && error.response) {\r\n\r\n    let forbidden = false\r\n    if (error.response.hasOwnProperty('status') && error.response.status) {\r\n      forbidden = error.response.status === 401 ? true : false\r\n    } else {\r\n      forbidden = false\r\n    }\r\n\r\n    if (error.response.hasOwnProperty('data') && error.response.data) {\r\n      if (error.response.data.hasOwnProperty('message') && error.response.data.message) {\r\n        return { general: true, error: error.response.data.message, forbidden }\r\n      } else {\r\n        return { general: false, error: error.response.data, forbidden }\r\n      }\r\n    } else {\r\n      return { general: true, error: 'Algo errado aconteceu, tente novamente mais tarde', forbidden }\r\n    }\r\n  } else {\r\n    if (error.toString() === 'Error: Network Error') {\r\n      return { general: true, error:'Erro de rede, o banco de dados estÃ¡ fora do ar', forbidden: false }\r\n    } else {\r\n      return { general: true, error:'Algo errado aconteceu, tente novamente mais tarde', forbidden: false }\r\n    }\r\n  }\r\n}\r\n\r\nexport { errorApi }","import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { api } from '../../config/api'\r\nimport { errorApi } from '../../config/handleErrors'\r\n\r\nfunction EmailResetPassword() {\r\n  const [email, setEmail] = useState({})\r\n  const [message, setMessage] = useState({})\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  let history = useHistory()\r\n\r\n  const handleEmailResetPassword = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const domain = window.location.hostname\r\n      const res = await api.post(`/users/login/emailresetpassword?domain=${domain}`, email)\r\n      setMessage({\r\n        email : res.data.email,\r\n        error : false\r\n      })\r\n      setLoading(false)\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.forbidden) {\r\n        history.push('/')\r\n      } else {\r\n        setMessage({ ...errorHandled.error, error: true })\r\n      }\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container container-login\">\r\n      <form>\r\n        <div className={`alert text-center ${message.error ? 'alert-danger' : 'alert-warning'}`}\r\n            role=\"alert\"\r\n            style={message.email ? { display: 'block'} : { display : 'none' }}>\r\n          {message.email}\r\n        </div>\r\n\r\n        <div className=\"text-center mb-3\">\r\n          <h5>\r\n            Enviaremos para o seu email um link para cadastro de nova senha\r\n          </h5>\r\n        </div>\r\n        \r\n        <div className=\"mb-2\" >\r\n          <label htmlFor=\"email\" \r\n                 className=\"form-label\">\r\n            Email\r\n          </label>\r\n          <input  type=\"email\" \r\n                  className='form-control'\r\n                  id=\"email\" \r\n                  maxLength=\"255\"\r\n                  value={email.email || ''}\r\n                  onChange={(e) => {\r\n                    const key = e.target.value\r\n                    setEmail({\r\n                      email: key\r\n                    })\r\n                  }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"text-center d-grid gap-2\">\r\n          <button type=\"button\" \r\n                  className=\"btn btn-primary\" \r\n                  onClick={handleEmailResetPassword}\r\n                  disabled={loading}>\r\n            <span className=\"spinner-border spinner-border-sm mx-1\" \r\n                  role=\"status\" \r\n                  aria-hidden=\"true\"\r\n                  style={loading ? { display: 'inline-block'} : { display : 'none' }}>\r\n            </span>\r\n            Enviar\r\n          </button>\r\n          <button type=\"button\" \r\n                  className=\"btn btn-warning text-white\"\r\n                  onClick={() => {\r\n                    history.push('/')\r\n                  }}>\r\n            Voltar\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EmailResetPassword\r\n"],"sourceRoot":""}