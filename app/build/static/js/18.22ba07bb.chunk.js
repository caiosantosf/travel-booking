(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[18],{449:function(e,a,t){"use strict";t.r(a);var n=t(3),s=t(89),r=t.n(s),c=t(90),o=t(51),i=t(1),l=t.n(i),d=t(6),u=t(87),b=t(88),m=t(85),p=t(86),j=t(2);a.default=function(e){var a=Object(i.useState)(!1),t=Object(o.a)(a,2),s=t[0],h=t[1],O=Object(i.useState)(!1),g=Object(o.a)(O,2),v=g[0],x=g[1],f=Object(i.useState)({description:"",layout:{seats:[]}}),y=Object(o.a)(f,2),k=y[0],N=y[1],w=Object(i.useState)({}),S=Object(o.a)(w,2),C=S[0],I=S[1],P=Object(i.useState)(""),E=Object(o.a)(P,2),L=E[0],A=E[1],F=Object(i.useState)(4),M=Object(o.a)(F,2),R=M[0],D=M[1],V=Object(d.f)(),q=e.match.params.id,z={headers:{"x-access-token":localStorage.getItem("token")}};Object(i.useEffect)((function(){"novo"!==q&&function(){var e=Object(c.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/buses/".concat(q),{headers:{"x-access-token":localStorage.getItem("token")}});case 3:a=e.sent,N(a.data),D(a.data.layout.seats.length),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),(t=Object(p.a)(e.t0)).forbidden?V.push("/"):t.general&&A(t.error);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[q,V]);var J=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(R+1),(a=k.layout.seats).push(0),N(Object(n.a)(Object(n.a)({},k),{},{layout:{seats:a}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),I({}),e.prev=2,"novo"===q){e.next=8;break}return e.next=6,m.a.put("/buses/".concat(q),k,z);case 6:e.next=10;break;case 8:return e.next=10,m.a.post("/buses",k,z);case 10:V.push("/onibus"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),h(!1),(a=Object(p.a)(e.t0)).general?A(a.error):I(a.error);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,m.a.delete("/buses/".concat(q),z);case 4:V.push("/onibus"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),(a=Object(p.a)(e.t0)).general?A(a.error):I(a.error);case 11:h(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(l.a.Fragment,{children:[Object(j.jsx)(u.a,{}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2",children:[Object(j.jsx)(b.a,{}),Object(j.jsx)("h5",{children:"Cadastro de \xf4nibus"}),Object(j.jsxs)("form",{className:"row g-3 mt-1 mb-4",children:[Object(j.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:L?{display:"block"}:{display:"none"},children:L}),Object(j.jsxs)("div",{className:"col-md-12",children:[Object(j.jsx)("label",{htmlFor:"description",className:"form-label",children:"Descri\xe7\xe3o"}),Object(j.jsx)("input",{type:"text",className:"form-control ".concat(C.description?"is-invalid":""),id:"description",maxLength:"255",value:k.description||"",onChange:function(e){N(Object(n.a)(Object(n.a)({},k),{},{description:e.target.value}))}}),Object(j.jsx)("div",{id:"validationName",className:"invalid-feedback",style:C.description?{display:"inline"}:{display:"none"},children:C.description})]}),Object(j.jsxs)("div",{className:"col-md-2",children:[Object(j.jsx)("label",{htmlFor:"layout",className:"form-label",children:"Layout"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:J,children:"Adicionar Poltrona"})]}),Object(j.jsx)("div",{className:"col-lg-6 col-xl-4",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("label",{htmlFor:"layout",className:"form-label",children:"Informe o n\xfamero das poltronas"}),Array.from({length:R},(function(e,a){return Object(j.jsx)("div",{className:"col-3 mb-1",children:Object(j.jsx)("input",{type:"number",className:"form-control",maxLength:"2",value:k.layout.seats[a]||"",onChange:function(e){var t=k.layout.seats;t[a]=parseInt(e.target.value),N(Object(n.a)(Object(n.a)({},k),{},{layout:{seats:t}}))}})},a)}))]})})]}),Object(j.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(j.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:T,disabled:s,children:[Object(j.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:s?{display:"inline-block"}:{display:"none"}}),"Salvar"]}),Object(j.jsxs)("button",{type:"button",className:"btn btn-primary",style:"novo"!==q?{display:"inline-block"}:{display:"none"},onClick:U,disabled:v,children:[Object(j.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:v?{display:"inline-block"}:{display:"none"}}),"Excluir"]}),Object(j.jsx)("button",{type:"button",className:"btn btn-warning text-white mb-4",onClick:function(){V.push("/onibus")},children:"Voltar"})]})]})})]})}},84:function(e,a,t){"use strict";a.a=t.p+"static/media/logo.dfc06e0c.webp"},85:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return r}));var n=t(91),s=t.n(n),r="https://api.ldviagens.com/",c=s.a.create({baseURL:r}),o=function(e){return s.a.get("https://viacep.com.br/ws/".concat(e,"/json/"))}},86:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n=function(e){if(e.hasOwnProperty("response")&&e.response){var a=!1;return a=!(!e.response.hasOwnProperty("status")||!e.response.status)&&401===e.response.status,e.response.hasOwnProperty("data")&&e.response.data?e.response.data.hasOwnProperty("message")&&e.response.data.message?{general:!0,error:e.response.data.message,forbidden:a}:{general:!1,error:e.response.data,forbidden:a}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:a}}return"Error: Network Error"===e.toString()?{general:!0,error:"Erro de rede, o banco de dados est\xe1 fora do ar",forbidden:!1}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:!1}}},87:function(e,a,t){"use strict";var n=t(1),s=t.n(n),r=t(84),c=t(98),o=(t(96),t(8)),i=t(2);function l(){return Object(i.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed mt-4",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(i.jsx)("span",{className:"navbar-toggler-icon"})})}a.a=function(e){var a=e.hamburger,t=Object(i.jsx)(c.a,{phoneNumber:localStorage.getItem("companyPhone"),textReplyTime:"Responderemos assim que poss\xedvel",message:"Ol\xe1! O que podemos fazer por voc\xea?",companyName:localStorage.getItem("companyName"),sendButton:"Enviar",placeholder:"Digite sua mensagem"});return Object(i.jsxs)(s.a.Fragment,{children:[Object(i.jsx)("header",{className:"navbar navbar-light sticky-top bg-white p-0 shadow",children:Object(i.jsxs)("div",{className:"container text-center",children:[Object(i.jsx)("img",{className:"my-3 img-menu",src:r.a,alt:"Logo"}),"none"!==a?Object(i.jsx)(l,{}):""]})}),"admin"!==Object(o.b)()?t:""]})}},88:function(e,a,t){"use strict";t(1);var n=t(55),s=t(8),r=t(2);a.a=function(){var e=[],a=Object(s.b)();return a||(e=[{key:3,name:"In\xedcio",to:"/"},{key:1,name:"Login",to:"/login"},{key:2,name:"Cadastrar",to:"/registro"}]),"admin"===a&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/admin-inicial"},{key:2,name:"Dados Admin",to:"/usuarios/".concat(Object(s.a)())},{key:3,name:"Reservas",to:"/reservas"},{key:4,name:"Visualiza\xe7\xe3o de Usu\xe1rios",to:"/usuarios"},{key:5,name:"Cadastro de Viagens",to:"/viagens"},{key:6,name:"Cadastro de \xd4nibus",to:"/onibus"},{key:7,name:"Sair",to:"/sair"}]),"regular"===a&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/"},{key:2,name:"Meus Dados",to:"/usuarios/".concat(Object(s.a)())},{key:3,name:"Minhas Reservas",to:"/minhas-reservas"},{key:4,name:"Sair",to:"/sair"}]),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",children:Object(r.jsx)("div",{className:"position-sticky pt-3",children:Object(r.jsx)("ul",{className:"nav flex-column",children:e.map((function(e){return Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(n.b,{className:"nav-link","aria-current":"page",to:e.to,children:e.name})},e.key)}))})})})})}}}]);
//# sourceMappingURL=18.22ba07bb.chunk.js.map