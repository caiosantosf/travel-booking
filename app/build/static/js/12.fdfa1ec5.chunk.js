(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[12],{170:function(e,t,a){"use strict";var n=a(1),c=a.n(n),s=a(18),r=a.n(s);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var o=Object(n.forwardRef)((function(e,t){var a=e.color,n=e.size,s=i(e,["color","size"]);return c.a.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:a},s),c.a.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),c.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}))}));o.propTypes={color:r.a.string,size:r.a.oneOfType([r.a.string,r.a.number])},o.defaultProps={color:"currentColor",size:"1em"},t.a=o},524:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(6),s=a(55),r=a.n(s),l=a(63),i=a(38),o=a(1),d=a.n(o),b=a(5),j=a(25),u=a(39),p=a(40),h=a(56),m=a(170),O=a(57),v=a(64);t.default=function(e){var t=Object(o.useState)(!1),a=Object(i.a)(t,2),s=a[0],x=a[1],f=Object(o.useState)(!1),y=Object(i.a)(f,2),g=y[0],N=y[1],k=Object(o.useState)({}),S=Object(i.a)(k,2),w=S[0],P=S[1],C=Object(o.useState)({}),F=Object(i.a)(C,2),D=F[0],A=F[1],I=Object(o.useState)(""),V=Object(i.a)(I,2),z=V[0],E=V[1],L=Object(o.useState)(),_=Object(i.a)(L,2),R=_[0],H=_[1],M=Object(o.useState)([]),B=Object(i.a)(M,2),J=B[0],T=B[1],q=Object(o.useState)([]),G=Object(i.a)(q,2),K=G[0],Q=G[1],U=Object(o.useState)([]),W=Object(i.a)(U,2),X=W[0],Y=W[1],Z=Object(b.f)(),$=e.match.params.id,ee={headers:{"x-access-token":localStorage.getItem("token")}};Object(o.useEffect)((function(){var e=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/travels/".concat($),{headers:{"x-access-token":localStorage.getItem("token")}});case 3:t=e.sent,a=t.data,Q(a.values),Y(a.departurePlaces),P(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),(n=Object(v.a)(e.t0)).forbidden?Z.push("/"):n.general&&E(n.error);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/buses",{headers:{"x-access-token":localStorage.getItem("token")}});case 3:200===(t=e.sent).status&&(a=t.data,T(a),"novo"===$&&P({controlsSeats:!0,departurePayment:!0,bus_id:a[0].id})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(n=Object(v.a)(e.t0)).forbidden?Z.push("/"):n.general&&E(n.error);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();"novo"!==$&&e(),t()}),[$,Z]);var te=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),A({}),e.prev=2,t=0,"novo"===$){e.next=13;break}return delete(a=Object(c.a)({},w)).values,delete a.departurePlaces,delete a.seats,e.next=11,h.a.put("/travels/".concat($),a,ee);case 11:e.next=17;break;case 13:return e.next=15,h.a.post("/travels",w,ee);case 15:n=e.sent,t=n.data.id;case 17:if(!R){e.next=23;break}return(s=new FormData).append("name",w.description),s.append("file",R),e.next=23,h.a.patch("/travels/image/".concat(t||$),s,ee);case 23:x(!1),"novo"!==$?Z.push("/viagens"):Z.push("/viagens/".concat(t)),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(2),x(!1),(l=Object(v.a)(e.t0)).general?E(l.error):A(l.error);case 32:case"end":return e.stop()}}),e,null,[[2,27]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,h.a.delete("/travels/".concat($),ee);case 4:Z.push("/viagens"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),(t=Object(v.a)(e.t0)).general?E(t.error):A(t.error);case 11:x(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z.push("/viagens/".concat($,"/valores/novo"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z.push("/viagens/".concat($,"/saidas/novo"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)(u.a,{}),Object(n.jsx)("div",{className:"container-fluid mb-4",children:Object(n.jsxs)("div",{className:"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2",children:[Object(n.jsx)(p.a,{}),Object(n.jsx)("h5",{children:"Cadastro de viagens"}),Object(n.jsxs)("form",{className:"row g-3 mt-1 mb-4",children:[Object(n.jsx)("div",{className:"alert text-center alert-primary",role:"alert",style:z?{display:"block"}:{display:"none"},children:z}),Object(n.jsxs)("div",{className:"col-md-12",children:[Object(n.jsx)("label",{htmlFor:"description",className:"form-label",children:"Descri\xe7\xe3o"}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(D.description?"is-invalid":""),id:"description",maxLength:"255",value:w.description||"",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{description:e.target.value}))}}),Object(n.jsx)("div",{id:"validationDescription",className:"invalid-feedback",style:D.description?{display:"inline"}:{display:"none"},children:D.description})]}),Object(n.jsxs)("div",{className:"col-md-6",children:[Object(n.jsx)("label",{htmlFor:"destination",className:"form-label",children:"Destino"}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(D.destination?"is-invalid":""),id:"description",maxLength:"255",value:w.destination||"",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{destination:e.target.value}))}}),Object(n.jsx)("div",{id:"validationDestination",className:"invalid-feedback",style:D.destination?{display:"inline"}:{display:"none"},children:D.destination})]}),Object(n.jsxs)("div",{className:"col-md-6",children:[Object(n.jsx)("label",{htmlFor:"bus",className:"form-label",children:"\xd4nibus"}),Object(n.jsx)("select",{className:"form-select ".concat(D.bus_id?"is-invalid":""),id:"bus",value:w.bus_id||"",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{bus_id:e.target.value}))},children:J.map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.description},e.id)}))}),Object(n.jsx)("div",{id:"validationBusId",className:"invalid-feedback",style:D.bus_id?{display:"inline"}:{display:"none"},children:D.bus_id})]}),Object(n.jsxs)("div",{className:"col-md-3",children:[Object(n.jsx)("label",{className:"form-label",htmlFor:"controlsSeat",children:"Controla Poltronas?"}),Object(n.jsxs)("select",{className:"form-select ".concat(D.controlsSeats?"is-invalid":""),id:"controlsSeat",value:w.controlsSeats||"false",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{controlsSeats:e.target.value}))},children:[Object(n.jsx)("option",{value:!0,children:"Sim"}),Object(n.jsx)("option",{value:!1,children:"N\xe3o"})]}),Object(n.jsx)("div",{id:"validationControlsSeats",className:"invalid-feedback",style:D.controlsSeats?{display:"inline"}:{display:"none"},children:D.controlsSeats})]}),Object(n.jsxs)("div",{className:"col-md-3",children:[Object(n.jsx)("label",{className:"form-label",htmlFor:"departurePayment",children:"Pagamento no Embarque?"}),Object(n.jsxs)("select",{className:"form-select ".concat(D.departurePayment?"is-invalid":""),id:"departurePayment",value:w.departurePayment||"false",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{departurePayment:e.target.value}))},children:[Object(n.jsx)("option",{value:!0,children:"Sim"}),Object(n.jsx)("option",{value:!1,children:"N\xe3o"})]}),Object(n.jsx)("div",{id:"validationDeparturePayment",className:"invalid-feedback",style:D.departurePayment?{display:"inline"}:{display:"none"},children:D.departurePayment})]}),Object(n.jsxs)("div",{className:"col-md-6",children:[Object(n.jsx)("label",{htmlFor:"file",className:"form-label",children:"Imagem"}),Object(n.jsx)("input",{name:"file",type:"file",className:"form-control file-upload",onChange:function(e){var t=e.target.files[0];H(t)}})]}),Object(n.jsxs)("div",{className:"col-md-12",children:[Object(n.jsx)("label",{htmlFor:"notes",className:"form-label",children:"Observa\xe7\xf5es"}),Object(n.jsx)("textarea",{type:"text",className:"form-control ".concat(D.notes?"is-invalid":""),id:"description",maxLength:"1000",value:w.notes||"",onChange:function(e){P(Object(c.a)(Object(c.a)({},w),{},{notes:e.target.value}))}}),Object(n.jsx)("div",{id:"validationNotes",className:"invalid-feedback",style:D.notes?{display:"inline"}:{display:"none"},children:D.notes})]}),Object(n.jsxs)("div",{style:"novo"!==$?{display:"block"}:{display:"none"},children:[Object(n.jsxs)("div",{className:"col-md-12",children:[Object(n.jsx)("label",{htmlFor:"",className:"form-label",children:"Valores"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:ne,children:"Adicionar Valor"})]}),Object(n.jsx)("div",{className:"table-responsive-sm mt-1",children:Object(n.jsxs)("table",{className:"table table-sm table-striped table-hover",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"Idade Ini."}),Object(n.jsx)("th",{scope:"col",children:"idade Fin."}),Object(n.jsx)("th",{scope:"col",children:"Valor"}),Object(n.jsx)("th",{scope:"col",children:"Valor Ida"}),Object(n.jsx)("th",{scope:"col",children:"Valor Volta"}),Object(n.jsx)("th",{scope:"col",children:"A\xe7\xf5es"})]},"0")}),Object(n.jsx)("tbody",{children:K.map((function(e){var t=e.id,a=e.value,c=e.onlyReturnValue,s=e.onlyDepartureValue,r=e.initialAge,l=e.finalAge;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:r}),Object(n.jsx)("td",{children:l}),Object(n.jsx)("td",{children:a}),Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:Object(n.jsx)(j.b,{className:"me-2",to:"/viagens/".concat($,"/valores/").concat(t),children:Object(n.jsx)(m.a,{})})})]},t)}))})]})}),Object(n.jsxs)("div",{className:"col-md-12",children:[Object(n.jsx)("label",{htmlFor:"",className:"form-label",children:"Pontos de Sa\xedda"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:ce,children:"Adicionar Ponto de Sa\xedda"})]}),Object(n.jsx)("div",{className:"table-responsive-sm mt-1",children:Object(n.jsxs)("table",{className:"table table-sm table-striped table-hover",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"Endere\xe7o"}),Object(n.jsx)("th",{scope:"col",children:"N\xfamero"}),Object(n.jsx)("th",{scope:"col",children:"Cidade"}),Object(n.jsx)("th",{scope:"col",children:"Data e Hora de Sa\xedda"}),Object(n.jsx)("th",{scope:"col",children:"Data e Hora de Retorno"}),Object(n.jsx)("th",{scope:"col",children:"A\xe7\xf5es"})]},"0")}),Object(n.jsx)("tbody",{children:X.map((function(e){var t=e.id,a=e.homeAddress,c=e.addressNumber,s=e.city,r=e.departureDate,l=e.returnDate;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:a}),Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{children:Object(O.c)(r)}),Object(n.jsx)("td",{children:Object(O.c)(l)}),Object(n.jsx)("td",{children:Object(n.jsx)(j.b,{className:"me-2",to:"/viagens/".concat($,"/saidas/").concat(t),children:Object(n.jsx)(m.a,{})})})]},t)}))})]})})]})]}),Object(n.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(n.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:te,disabled:s,children:[Object(n.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:s?{display:"inline-block"}:{display:"none"}}),"Salvar"]}),Object(n.jsx)("button",{type:"button",style:"novo"!==$?{display:"inline-block"}:{display:"none"},className:"btn btn-primary",onClick:function(){return Z.push("/reserva/".concat($,"/").concat(Math.ceil(1e6*Math.random())))},children:"Fazer Reserva"}),Object(n.jsx)("button",{type:"button",style:"novo"!==$?{display:"inline-block"}:{display:"none"},className:"btn btn-primary",onClick:function(){return Z.push("/viagens/".concat($,"/reservas"),{travel:w,departurePlaces:X})},children:"Lista de Passageiros"}),Object(n.jsx)("button",{type:"button",style:"novo"!==$?{display:"inline-block"}:{display:"none"},className:"btn btn-primary",onClick:function(){return Z.push("/viagens/".concat($,"/pagamentos"))},children:"Pagamentos"}),Object(n.jsxs)("button",{type:"button",className:"btn btn-primary",style:"novo"!==$?{display:"inline-block"}:{display:"none"},onClick:ae,disabled:g,children:[Object(n.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:g?{display:"inline-block"}:{display:"none"}}),"Excluir"]}),Object(n.jsx)("button",{type:"button",className:"btn btn-warning text-white",onClick:function(){Z.push("/viagens")},children:"Voltar"})]})]})})]})}}}]);
//# sourceMappingURL=12.fdfa1ec5.chunk.js.map