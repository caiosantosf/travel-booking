(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[23],{516:function(e,t,a){"use strict";a.r(t);var s=a(6),n=a(0),c=a(55),r=a.n(c),i=a(63),l=a(38),o=a(1),d=a(5),b=a(25),p=a(56),m=a(65),j=a(4),u=a(64);t.default=function(e){var t=Object(o.useState)({}),a=Object(l.a)(t,2),c=a[0],h=a[1],O=Object(o.useState)({}),f=Object(l.a)(O,2),x=f[0],v=f[1],g=Object(o.useState)(!1),y=Object(l.a)(g,2),N=y[0],k=y[1],w=Object(o.useState)(""),S=Object(l.a)(w,2),C=S[0],I=S[1],E="/admin"===e.match.url,P="/sair"===e.match.url,F=localStorage.getItem("token"),L=localStorage.getItem("to"),J=Object(d.f)();Object(o.useEffect)((function(){P&&(localStorage.removeItem("token"),J.push("/"))}),[P,J]),Object(o.useEffect)((function(){if(F)if(L)localStorage.setItem("to",""),J.push(L);else{var e=Object(j.b)();"admin"===e?J.push("/admin-inicial"):"regular"===e&&J.push("/")}}),[F,J,L]);var q=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,s,n,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),v({}),e.next=5,p.a.post("/users/login/".concat(E?"admin":""),c);case 5:t=e.sent,a=t.data,s=a.token,n=a.companyName,i=a.companyPhone,$(s,n,i),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),(l=Object(u.a)(e.t0)).general?I(l.error):v(l.error),k(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),$=function(e,t,a){localStorage.setItem("token",e),localStorage.setItem("companyName",t),localStorage.setItem("companyPhone",a),k(!1)};return Object(n.jsx)("div",{className:"container container-login",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"text-center mb-3",children:[Object(n.jsx)("img",{className:"mb-3 img-login",src:m.a,alt:"Logo"}),Object(n.jsx)("h5",{children:"Sistema de reserva"})]}),Object(n.jsxs)("div",{className:"mb-2",children:[Object(n.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:C?{display:"block"}:{display:"none"},children:C}),Object(n.jsx)("label",{htmlFor:"cpf",className:"form-label",children:"CPF"}),Object(n.jsx)("input",{type:"text",className:"form-control ".concat(x.cpf?"is-invalid":""),id:"cpf",maxLength:"11",value:c.cpf||"",onChange:function(e){var t=e.target.value;(""===t||/^[0-9\b]+$/.test(t))&&h(Object(s.a)(Object(s.a)({},c),{},{cpf:t}))}}),Object(n.jsx)("div",{id:"validationCpf",className:"invalid-feedback",style:x.cpf?{display:"inline"}:{display:"none"},children:x.cpf})]}),Object(n.jsxs)("div",{className:"mb-2",children:[Object(n.jsx)("label",{htmlFor:"password",className:"form-label",children:"Senha"}),Object(n.jsx)("input",{type:"password",className:"form-control ".concat(x.password?"is-invalid":""),id:"password",maxLength:"8",onChange:function(e){h(Object(s.a)(Object(s.a)({},c),{},{password:e.target.value}))}}),Object(n.jsx)("div",{id:"validationPassword",className:"invalid-feedback",style:x.password?{display:"inline"}:{display:"none"},children:x.password})]}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)(b.b,{to:"/email-redefine-senha",children:"Esqueci minha senha"})}),Object(n.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(n.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:q,disabled:N,children:[Object(n.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:N?{display:"inline-block"}:{display:"none"}}),"Entrar"]}),Object(n.jsx)("button",{type:"button",className:"btn btn-warning text-white",style:E?{display:"none"}:{display:"inline-block"},onClick:function(){J.push("/registro")},children:"Cadastrar"})]})]})})}}}]);
//# sourceMappingURL=23.22123df3.chunk.js.map