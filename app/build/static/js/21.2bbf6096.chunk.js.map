{"version":3,"sources":["components/travel/Value.js"],"names":["Value","props","useState","loadingSave","setLoadingSave","loadingDestroy","setLoadingDestroy","error","setError","message","setMessage","lapChild","value","onlyDepartureValue","onlyReturnValue","initialAge","finalAge","setValue","history","useHistory","match","params","travel_id","id","config","headers","localStorage","getItem","useEffect","a","api","get","res","data","errorHandled","errorApi","forbidden","push","general","fetchData","handleSave","put","post","handleDestroy","delete","Fragment","className","role","style","display","htmlFor","type","max","onChange","e","target","onClick","disabled","aria-hidden"],"mappings":"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","file":"static/js/21.2bbf6096.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport NavHeader from '../nav/NavHeader'\r\nimport Sidebar from '../nav/Sidebar'\r\nimport { api } from '../../config/api'\r\nimport { errorApi } from '../../config/handleErrors'\r\n\r\nfunction Value(props) {\r\n  const [loadingSave, setLoadingSave] = useState(false)\r\n  const [loadingDestroy, setLoadingDestroy] = useState(false)\r\n  const [error, setError] = useState({})\r\n  const [message, setMessage] = useState('')\r\n  const [value, setValue] = useState({ lapChild: false, value: 0, onlyDepartureValue: 0, onlyReturnValue: 0, initialAge: 0, finalAge: 0 })\r\n\r\n  let history = useHistory()\r\n\r\n  let { travel_id, id } = props.match.params\r\n\r\n  const config = { headers :{\r\n    'x-access-token' : localStorage.getItem('token')\r\n  }}\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await api.get(`/travels/${travel_id}/values/${id}`, \r\n          { headers :{\r\n            'x-access-token' : localStorage.getItem('token')\r\n          }})\r\n\r\n        const { data } = res\r\n\r\n        setValue(data)\r\n      } catch (error) {\r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.forbidden) {\r\n          history.push('/')\r\n        } else {\r\n          if (errorHandled.general) {\r\n            setMessage(errorHandled.error)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (id !== 'novo') {\r\n      fetchData()\r\n    }\r\n  }, [travel_id, id, history])\r\n\r\n  const handleSave = async () => {\r\n    setLoadingSave(true)\r\n    setError({})\r\n\r\n    try {\r\n      if (id !== 'novo') {\r\n        await api.put(`/travels/${travel_id}/values/${id}`, value, config)\r\n      } else {\r\n        await api.post(`/travels/${travel_id}/values`, value, config)\r\n      }\r\n\r\n      history.push(`/viagens/${travel_id}`)\r\n    } catch (error) {\r\n      setLoadingSave(false)\r\n      \r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      } else {\r\n        setError(errorHandled.error)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleDestroy = async () => {\r\n    setLoadingDestroy(true)\r\n\r\n    try {\r\n      await api.delete(`/travels/${travel_id}/values/${id}`, config)\r\n      history.push(`/viagens/${travel_id}`)\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      } else {\r\n        setError(errorHandled.error)\r\n      }\r\n    }\r\n\r\n    setLoadingSave(false)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavHeader />\r\n      <div className=\"container-fluid mb-4\">\r\n        <div className=\"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2\">\r\n        <Sidebar />\r\n\r\n        <h5>Cadastro de valores da viagem</h5>\r\n\r\n        <form className=\"row g-3 mt-1 mb-4\">\r\n          <div className='alert text-center alert-primary' role=\"alert\"\r\n               style={message ? { display: 'block'} : { display : 'none' }}>\r\n            {message}\r\n          </div>\r\n\r\n          <div className=\"col-md-3\">\r\n            <label htmlFor=\"initialAge\" className='form-label'>Idade Inicial</label>\r\n            <input  id=\"initialAge\" type=\"number\" className={`form-control ${error.initialAge ? 'is-invalid' : ''}`} max=\"99\"\r\n                    value={value.initialAge || 0}\r\n                    onChange={e => {\r\n                      setValue({ ...value,\r\n                        initialAge: e.target.value\r\n                      })\r\n                    }}/>\r\n\r\n            <div id=\"validationInitialAge\" \r\n                className=\"invalid-feedback\" \r\n                style={error.initialAge ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.initialAge}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-3\">\r\n            <label htmlFor=\"finalAge\" className='form-label'>Idade Final</label>\r\n            <input  id=\"finalAge\" type=\"number\" className={`form-control ${error.finalAge ? 'is-invalid' : ''}`} max=\"99\"\r\n                    value={value.finalAge || 0}\r\n                    onChange={e => {\r\n                      setValue({ ...value,\r\n                        finalAge: e.target.value\r\n                      })\r\n                    }}/>\r\n\r\n            <div id=\"validationFinalAge\" \r\n                className=\"invalid-feedback\" \r\n                style={error.finalAge ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.finalAge}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-6\">\r\n            <label htmlFor=\"value\" className='form-label'>Valor</label>\r\n            <input  id=\"value\" type=\"number\" className={`form-control ${error.value ? 'is-invalid' : ''}`}\r\n                    value={value.value || 0}\r\n                    onChange={e => {\r\n                      setValue({ ...value,\r\n                        value: e.target.value\r\n                      })\r\n                    }}/>\r\n\r\n            <div id=\"validationValue\" \r\n                className=\"invalid-feedback\" \r\n                style={error.value ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.value}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-4\">\r\n            <label htmlFor=\"onlyDepartureValue\" className='form-label'>Valor Ida</label>\r\n            <input  id=\"onlyDepartureValue\" type=\"number\" className={`form-control ${error.onlyDepartureValue ? 'is-invalid' : ''}`}\r\n                    value={value.onlyDepartureValue || 0}\r\n                    onChange={e => {\r\n                      setValue({ ...value,\r\n                        onlyDepartureValue: e.target.value\r\n                      })\r\n                    }}/>\r\n\r\n            <div id=\"validationOnlyDepartureValue\" \r\n                className=\"invalid-feedback\" \r\n                style={error.onlyDepartureValue ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.onlyDepartureValue}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-4\">\r\n            <label htmlFor=\"onlyReturnValue\" className='form-label'>Valor Retorno</label>\r\n            <input  id=\"onlyReturnValue\" type=\"number\" className={`form-control ${error.onlyReturnValue ? 'is-invalid' : ''}`}\r\n                    value={value.onlyReturnValue || 0}\r\n                    onChange={e => {\r\n                      setValue({ ...value,\r\n                        onlyReturnValue: e.target.value\r\n                      })\r\n                    }}/>\r\n\r\n            <div id=\"validationOnlyReturnValue\" \r\n                className=\"invalid-feedback\" \r\n                style={error.onlyReturnValue ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.onlyReturnValue}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-4\">\r\n            <label className=\"form-label\" htmlFor=\"lapChild\">Criança de colo?</label>\r\n            <select className={`form-select ${error.lapChild ? 'is-invalid' : ''}`} id=\"lapChild\"\r\n              value={value.lapChild || false}\r\n              onChange={e => {\r\n                setValue({ ...value,\r\n                  lapChild: e.target.value\r\n                })\r\n              }}>\r\n              <option value={false}>Não</option>\r\n              <option value={true}>Sim</option>\r\n            </select>\r\n\r\n            <div id=\"validationLapChild\" \r\n                className=\"invalid-feedback\" \r\n                style={error.lapChild ? { display: 'inline' } : { display: 'none' }}>\r\n                {error.lapChild}\r\n            </div>\r\n          </div>\r\n\r\n        </form>\r\n\r\n        <div className=\"text-center d-grid gap-2\">\r\n          <button type=\"button\" \r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleSave}\r\n                  disabled={loadingSave}>\r\n            <span className=\"spinner-border spinner-border-sm mx-1\" \r\n                  role=\"status\" \r\n                  aria-hidden=\"true\" \r\n                  style={loadingSave ? { display: 'inline-block'} : { display : 'none' }}>\r\n            </span>\r\n            Salvar\r\n          </button>\r\n\r\n          <button type=\"button\" \r\n                  className=\"btn btn-primary\"\r\n                  style={id !== 'novo' ? { display: 'inline-block'} : { display : 'none' }}\r\n                  onClick={handleDestroy}\r\n                  disabled={loadingDestroy}>\r\n            <span className=\"spinner-border spinner-border-sm mx-1\" \r\n                  role=\"status\" \r\n                  aria-hidden=\"true\" \r\n                  style={loadingDestroy ? { display: 'inline-block'} : { display : 'none' }}>\r\n            </span>\r\n            Excluir\r\n          </button>\r\n\r\n          <button type=\"button\" \r\n                  className=\"btn btn-warning text-white\"\r\n                  onClick={() => {\r\n                    history.push(`/viagens/${travel_id}`)\r\n                  }}>\r\n            Voltar\r\n          </button>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Value\r\n"],"sourceRoot":""}