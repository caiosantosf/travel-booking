{"version":3,"sources":["components/user/EmailResetPassword.js","config/api.js","config/handleErrors.js"],"names":["EmailResetPassword","useState","email","setEmail","message","setMessage","loading","setLoading","history","useHistory","handleEmailResetPassword","a","domain","window","location","hostname","api","post","res","data","error","errorHandled","errorApi","forbidden","push","className","role","style","display","htmlFor","type","id","maxLength","value","onChange","e","key","target","onClick","disabled","apiUrl","process","axios","create","baseURL","apiCep","cep","get","hasOwnProperty","response","status","general","toString"],"mappings":"qLA4FeA,UAvFf,WACE,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA8BJ,oBAAS,GAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KAEIC,EAAUC,cAERC,EAAwB,uCAAG,gCAAAC,EAAA,sEAE7BJ,GAAW,GACLK,EAASC,OAAOC,SAASC,SAHF,SAIXC,IAAIC,KAAJ,iDAAmDL,GAAUV,GAJlD,OAIvBgB,EAJuB,OAK7Bb,EAAW,CACTH,MAAQgB,EAAIC,KAAKjB,MACjBkB,OAAQ,IAEVb,GAAW,GATkB,mDAWvBc,EAAeC,YAAS,EAAD,KACZC,UACff,EAAQgB,KAAK,KAEbnB,EAAW,2BAAKgB,EAAaD,OAAnB,IAA0BA,OAAO,KAE7Cb,GAAW,GAjBkB,0DAAH,qDAqB9B,OACE,qBAAKkB,UAAU,4BAAf,SACE,iCACE,qBAAKA,UAAS,4BAAuBrB,EAAQgB,MAAQ,eAAiB,iBAClEM,KAAK,QACLC,MAAOvB,EAAQF,MAAQ,CAAE0B,QAAS,SAAW,CAAEA,QAAU,QAF7D,SAGGxB,EAAQF,QAGX,qBAAKuB,UAAU,mBAAf,SACE,mGAKF,sBAAKA,UAAU,OAAf,UACE,uBAAOI,QAAQ,QACRJ,UAAU,aADjB,mBAIA,uBAAQK,KAAK,QACLL,UAAU,eACVM,GAAG,QACHC,UAAU,MACVC,MAAO/B,EAAMA,OAAS,GACtBgC,SAAU,SAACC,GACT,IAAMC,EAAMD,EAAEE,OAAOJ,MACrB9B,EAAS,CACPD,MAAOkC,UAMrB,sBAAKX,UAAU,2BAAf,UACE,yBAAQK,KAAK,SACLL,UAAU,kBACVa,QAAS5B,EACT6B,SAAUjC,EAHlB,UAIE,sBAAMmB,UAAU,wCACVC,KAAK,SACL,cAAY,OACZC,MAAOrB,EAAU,CAAEsB,QAAS,gBAAkB,CAAEA,QAAU,UAPlE,YAWA,wBAAQE,KAAK,SACLL,UAAU,6BACVa,QAAS,WACP9B,EAAQgB,KAAK,MAHvB,8B,gCC/EV,2HAEMgB,EAASC,yBAETzB,EAAM0B,IAAMC,OAAO,CACvBC,QAASJ,IAGLK,EAAS,SAAAC,GAAG,OAAKJ,IAAMK,IAAN,mCAAsCD,EAAtC,a,gCCRvB,sCAAMxB,EAAW,SAACF,GAChB,GAAIA,EAAM4B,eAAe,aAAe5B,EAAM6B,SAAU,CAEtD,IAAI1B,GAAY,EAOhB,OALEA,KADEH,EAAM6B,SAASD,eAAe,YAAa5B,EAAM6B,SAASC,SACtB,MAA1B9B,EAAM6B,SAASC,OAKzB9B,EAAM6B,SAASD,eAAe,SAAW5B,EAAM6B,SAAS9B,KACtDC,EAAM6B,SAAS9B,KAAK6B,eAAe,YAAc5B,EAAM6B,SAAS9B,KAAKf,QAChE,CAAE+C,SAAS,EAAM/B,MAAOA,EAAM6B,SAAS9B,KAAKf,QAASmB,aAErD,CAAE4B,SAAS,EAAO/B,MAAOA,EAAM6B,SAAS9B,KAAMI,aAGhD,CAAE4B,SAAS,EAAM/B,MAAO,oDAAqDG,aAGtF,MAAyB,yBAArBH,EAAMgC,WACD,CAAED,SAAS,EAAM/B,MAAM,oDAAkDG,WAAW,GAEpF,CAAE4B,SAAS,EAAM/B,MAAM,oDAAqDG,WAAW","file":"static/js/25.086872a8.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { api } from '../../config/api'\r\nimport { errorApi } from '../../config/handleErrors'\r\n\r\nfunction EmailResetPassword() {\r\n  const [email, setEmail] = useState({})\r\n  const [message, setMessage] = useState({})\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  let history = useHistory()\r\n\r\n  const handleEmailResetPassword = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const domain = window.location.hostname\r\n      const res = await api.post(`/users/login/emailresetpassword?domain=${domain}`, email)\r\n      setMessage({\r\n        email : res.data.email,\r\n        error : false\r\n      })\r\n      setLoading(false)\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.forbidden) {\r\n        history.push('/')\r\n      } else {\r\n        setMessage({ ...errorHandled.error, error: true })\r\n      }\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container container-login\">\r\n      <form>\r\n        <div className={`alert text-center ${message.error ? 'alert-danger' : 'alert-warning'}`}\r\n            role=\"alert\"\r\n            style={message.email ? { display: 'block'} : { display : 'none' }}>\r\n          {message.email}\r\n        </div>\r\n\r\n        <div className=\"text-center mb-3\">\r\n          <h5>\r\n            Enviaremos para o seu email um link para cadastro de nova senha\r\n          </h5>\r\n        </div>\r\n        \r\n        <div className=\"mb-2\" >\r\n          <label htmlFor=\"email\" \r\n                 className=\"form-label\">\r\n            Email\r\n          </label>\r\n          <input  type=\"email\" \r\n                  className='form-control'\r\n                  id=\"email\" \r\n                  maxLength=\"255\"\r\n                  value={email.email || ''}\r\n                  onChange={(e) => {\r\n                    const key = e.target.value\r\n                    setEmail({\r\n                      email: key\r\n                    })\r\n                  }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"text-center d-grid gap-2\">\r\n          <button type=\"button\" \r\n                  className=\"btn btn-primary\" \r\n                  onClick={handleEmailResetPassword}\r\n                  disabled={loading}>\r\n            <span className=\"spinner-border spinner-border-sm mx-1\" \r\n                  role=\"status\" \r\n                  aria-hidden=\"true\"\r\n                  style={loading ? { display: 'inline-block'} : { display : 'none' }}>\r\n            </span>\r\n            Enviar\r\n          </button>\r\n          <button type=\"button\" \r\n                  className=\"btn btn-warning text-white\"\r\n                  onClick={() => {\r\n                    history.push('/')\r\n                  }}>\r\n            Voltar\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EmailResetPassword\r\n","import axios from 'axios'\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL\r\n\r\nconst api = axios.create({\r\n  baseURL: apiUrl\r\n})\r\n\r\nconst apiCep = cep => (axios.get(`https://viacep.com.br/ws/${cep}/json/`))\r\n\r\nexport { api, apiCep, apiUrl }","const errorApi = (error) => {\r\n  if (error.hasOwnProperty('response') && error.response) {\r\n\r\n    let forbidden = false\r\n    if (error.response.hasOwnProperty('status') && error.response.status) {\r\n      forbidden = error.response.status === 401 ? true : false\r\n    } else {\r\n      forbidden = false\r\n    }\r\n\r\n    if (error.response.hasOwnProperty('data') && error.response.data) {\r\n      if (error.response.data.hasOwnProperty('message') && error.response.data.message) {\r\n        return { general: true, error: error.response.data.message, forbidden }\r\n      } else {\r\n        return { general: false, error: error.response.data, forbidden }\r\n      }\r\n    } else {\r\n      return { general: true, error: 'Algo errado aconteceu, tente novamente mais tarde', forbidden }\r\n    }\r\n  } else {\r\n    if (error.toString() === 'Error: Network Error') {\r\n      return { general: true, error:'Erro de rede, o banco de dados est√° fora do ar', forbidden: false }\r\n    } else {\r\n      return { general: true, error:'Algo errado aconteceu, tente novamente mais tarde', forbidden: false }\r\n    }\r\n  }\r\n}\r\n\r\nexport { errorApi }"],"sourceRoot":""}