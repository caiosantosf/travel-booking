(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[24],{442:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(89),s=a.n(r),c=a(90),o=a(51),i=a(1),l=a(6),d=a(55),p=a(85),b=a(84),u=a(8),m=a(86),j=a(2);t.default=function(e){var t=Object(i.useState)({}),a=Object(o.a)(t,2),r=a[0],f=a[1],h=Object(i.useState)({}),O=Object(o.a)(h,2),g=O[0],v=O[1],x=Object(i.useState)(!1),y=Object(o.a)(x,2),w=y[0],N=y[1],k=Object(i.useState)(""),S=Object(o.a)(k,2),P=S[0],C=S[1],E="/admin"===e.match.url,I="/sair"===e.match.url,L=localStorage.getItem("token"),F=localStorage.getItem("to"),A=Object(l.f)();Object(i.useEffect)((function(){I&&(localStorage.removeItem("token"),A.push("/"))}),[I,A]),Object(i.useEffect)((function(){if(L)if(F)localStorage.setItem("to",""),A.push(F);else{var e=Object(u.b)();"admin"===e?A.push("/admin-inicial"):"regular"===e&&A.push("/")}}),[L,A,F]);var J=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),v({}),e.next=5,p.a.post("/users/login/".concat(E?"admin":""),r);case 5:t=e.sent,a=t.data,n=a.token,c=a.companyName,o=a.companyPhone,q(n,c,o),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),(i=Object(m.a)(e.t0)).general?C(i.error):v(i.error),N(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(e,t,a){localStorage.setItem("token",e),localStorage.setItem("companyName",t),localStorage.setItem("companyPhone",a),N(!1)};return Object(j.jsx)("div",{className:"container container-login",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"text-center mb-3",children:[Object(j.jsx)("img",{className:"mb-3 img-login",src:b.a,alt:"Logo"}),Object(j.jsx)("h5",{children:"Sistema de reserva"})]}),Object(j.jsxs)("div",{className:"mb-2",children:[Object(j.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:P?{display:"block"}:{display:"none"},children:P}),Object(j.jsx)("label",{htmlFor:"cpf",className:"form-label",children:"CPF"}),Object(j.jsx)("input",{type:"text",className:"form-control ".concat(g.cpf?"is-invalid":""),id:"cpf",maxLength:"11",value:r.cpf||"",onChange:function(e){var t=e.target.value;(""===t||/^[0-9\b]+$/.test(t))&&f(Object(n.a)(Object(n.a)({},r),{},{cpf:t}))}}),Object(j.jsx)("div",{id:"validationCpf",className:"invalid-feedback",style:g.cpf?{display:"inline"}:{display:"none"},children:g.cpf})]}),Object(j.jsxs)("div",{className:"mb-2",children:[Object(j.jsx)("label",{htmlFor:"password",className:"form-label",children:"Senha"}),Object(j.jsx)("input",{type:"password",className:"form-control ".concat(g.password?"is-invalid":""),id:"password",maxLength:"8",onChange:function(e){f(Object(n.a)(Object(n.a)({},r),{},{password:e.target.value}))}}),Object(j.jsx)("div",{id:"validationPassword",className:"invalid-feedback",style:g.password?{display:"inline"}:{display:"none"},children:g.password})]}),Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)(d.b,{to:"/email-redefine-senha",children:"Esqueci minha senha"})}),Object(j.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(j.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:J,disabled:w,children:[Object(j.jsx)("span",{className:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true",style:w?{display:"inline-block"}:{display:"none"}}),"Entrar"]}),Object(j.jsx)("button",{type:"button",className:"btn btn-warning text-white",style:E?{display:"none"}:{display:"inline-block"},onClick:function(){A.push("/registro")},children:"Cadastrar"})]})]})})}},84:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.dfc06e0c.webp"},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s}));var n=a(91),r=a.n(n),s="http://localhost:3300/",c=r.a.create({baseURL:s}),o=function(e){return r.a.get("https://viacep.com.br/ws/".concat(e,"/json/"))}},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){if(e.hasOwnProperty("response")&&e.response){var t=!1;return t=!(!e.response.hasOwnProperty("status")||!e.response.status)&&401===e.response.status,e.response.hasOwnProperty("data")&&e.response.data?e.response.data.hasOwnProperty("message")&&e.response.data.message?{general:!0,error:e.response.data.message,forbidden:t}:{general:!1,error:e.response.data,forbidden:t}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:t}}return"Error: Network Error"===e.toString()?{general:!0,error:"Erro de rede, o banco de dados est\xe1 fora do ar",forbidden:!1}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:!1}}}}]);
//# sourceMappingURL=24.ddd98354.chunk.js.map