(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[11],{286:function(e,t){},288:function(e,t){},331:function(e,t){},332:function(e,t){},463:function(e,t,a){"use strict";a.r(t);var n=a(89),r=a.n(n),s=a(90),c=a(51),o=a(1),l=a.n(o),i=a(6),d=a(87),u=a(88),b=a(158),j=a(454),p=a(122),m=a(123),h=a(124),x=a(125),f=a(85),g=a(200),O=a(94),v=a(2),y=g.d.create({table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,margin:10},tableRow:{margin:"auto",flexDirection:"row"},tableColSmall:{width:"7%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableColMedium:{width:"19%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableColBig:{width:"30%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:10},title:{margin:10}});var C=function(e){var t=e.passengers,a=e.travel,n=e.departurePlaces;return Object(v.jsx)(g.a,{children:Object(v.jsxs)(g.c,{size:"A4",style:y.page,children:[Object(v.jsx)(g.e,{style:y.title,children:"".concat(a.destination," - ").concat(Object(O.c)(n[0].departureDate))}),Object(v.jsxs)(g.f,{style:y.table,children:[Object(v.jsxs)(g.f,{style:y.tableRow,children:[Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"P. Ida"})}),Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"P. Volta"})}),Object(v.jsx)(g.f,{style:y.tableColMedium,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"Pagamento"})}),Object(v.jsx)(g.f,{style:y.tableColBig,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"Ponto"})}),Object(v.jsx)(g.f,{style:y.tableColBig,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"Nome"})}),Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:"Colo"})})]}),t.map((function(e){var t=e.id,a=e.person,r=e.departureSeat,s=e.returnSeat,c=e.lapChild,o=e.status,l=e.departurePlace_id,i=a.name;return r||s||c?Object(v.jsxs)(g.f,{style:y.tableRow,children:[Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:r})}),Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:s})}),Object(v.jsx)(g.f,{style:y.tableColMedium,children:Object(v.jsx)(g.e,{style:y.tableCell,children:Object(O.e)(o).translated})}),Object(v.jsx)(g.f,{style:y.tableColBig,children:Object(v.jsx)(g.e,{style:y.tableCell,children:n.filter((function(e){return e.id===l}))[0].homeAddress})}),Object(v.jsx)(g.f,{style:y.tableColBig,children:Object(v.jsx)(g.e,{style:y.tableCell,children:i})}),Object(v.jsx)(g.f,{style:y.tableColSmall,children:Object(v.jsx)(g.e,{style:y.tableCell,children:c?"Sim":"N\xe3o"})})]},t):null}))]})]})})},k=a(86);t.default=function(e){var t=Object(o.useState)([]),a=Object(c.a)(t,2),n=a[0],O=a[1],y=Object(o.useState)(1),w=Object(c.a)(y,2),S=w[0],N=w[1],P=Object(o.useState)(0),M=Object(c.a)(P,2),D=M[0],E=M[1],I=Object(o.useState)(""),R=Object(c.a)(I,2),W=R[0],_=R[1],F=Object(o.useState)({}),T=Object(c.a)(F,2),A=T[0],L=T[1],B=Object(o.useState)([{}]),V=Object(c.a)(B,2),z=V[0],q=V[1],Y=Object(o.useState)({}),J=Object(c.a)(Y,2),U=J[0],H=J[1],G=e.match.params.travel_id,K=e.location.state,Q=K.travel,X=K.departurePlaces,Z=Object(i.f)();Object(o.useEffect)((function(){L(Q),q(X)}),[Q,X]),Object(o.useEffect)((function(){(function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/reservations",{headers:{travel_id:G,active:!0,currentPage:S,"x-access-token":localStorage.getItem("token"),list:"passengers"}});case 3:200===(t=e.sent).status?(E(t.data.pagination.lastPage),O(t.data.data)):E(1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(a=Object(k.a)(e.t0)).forbidden?Z.push("/"):a.general&&_(a.error);case 11:return e.prev=11,e.next=14,f.a.get("/admin-data/",{headers:{"x-access-token":localStorage.getItem("token")}});case 14:n=e.sent,s=n.data,H(s),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(11),(c=Object(k.a)(e.t1)).general&&_(c.error);case 23:case"end":return e.stop()}}),e,null,[[0,7],[11,19]])})));return function(){return e.apply(this,arguments)}})()()}),[S,G,Z]);var $=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/reservations/".concat(t),{headers:{"x-access-token":localStorage.getItem("token")}});case 3:a=n.filter((function(e,a,n){return e.id!==t})),O(a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(s=Object(k.a)(e.t0)).general&&_(s.error);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(S-1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(S+1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(D);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(l.a.Fragment,{children:[Object(v.jsx)(d.a,{}),Object(v.jsx)("div",{className:"container-fluid mb-4",children:Object(v.jsxs)("div",{className:"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2",children:[Object(v.jsx)(u.a,{}),Object(v.jsx)("h5",{children:"Lista de Passageiros"}),Object(v.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:W?{display:"block"}:{display:"none"},children:W}),Object(v.jsx)("div",{className:"table-responsive-sm",children:Object(v.jsxs)("table",{className:"table table-responsive-lgcd ap table-sm table-striped table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"P. Ida"}),Object(v.jsx)("th",{scope:"col",children:"P. Volta"}),Object(v.jsx)("th",{scope:"col",children:"Nome"}),Object(v.jsx)("th",{scope:"col",children:"Colo"}),Object(v.jsx)("th",{scope:"col",children:"Respons\xe1vel"}),Object(v.jsx)("th",{scope:"col",children:"Telefone"}),Object(v.jsx)("th",{scope:"col"})]},"0")}),Object(v.jsx)("tbody",{children:n.map((function(e){var t=e.id,a=e.person,n=e.departureSeat,r=e.returnSeat,s=e.lapChild,c=e.user_id,o=a.name,l=a.phone,i=a.responsible,d=l?l.length:0,u=Object(v.jsx)("a",{className:"ms-2",href:"https://api.whatsapp.com/send?phone=55".concat(l),target:"_blank",rel:"noreferrer",children:Object(v.jsx)(b.a,{style:{color:"green"}})});return n||r||s?Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:n}),Object(v.jsx)("td",{children:r}),Object(v.jsx)("td",{children:o}),Object(v.jsx)("td",{children:s?"Sim":"N\xe3o"}),Object(v.jsx)("td",{children:i||""}),Object(v.jsxs)("td",{children:[l?"(".concat(e.person.phone.substr(0,2),") ").concat(l.substr(2,10===d?4:5),"-").concat(l.substr(10===d?6:7,4)):"",l?u:""]}),Object(v.jsx)("td",{children:c===U.user_id?Object(v.jsxs)("button",{className:"btn btn-link p-0",onClick:function(){$(t)},children:[Object(v.jsx)(j.a,{})," "]}):""})]},t):""}))})]})}),Object(v.jsx)("nav",{"aria-label":"Page navigation example",children:Object(v.jsxs)("ul",{className:"pagination",children:[Object(v.jsx)("li",{className:"page-item",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:1===S,onClick:ee,children:Object(v.jsx)(p.a,{})})}),Object(v.jsx)("li",{className:"page-item",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:1===S,onClick:te,children:Object(v.jsx)(m.a,{})})}),Object(v.jsx)("li",{className:"page-item",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:S===D,onClick:ae,children:Object(v.jsx)(h.a,{})})}),Object(v.jsx)("li",{className:"page-item",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:S===D,onClick:ne,children:Object(v.jsx)(x.a,{})})})]})}),Object(v.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(v.jsx)(g.b,{className:"btn btn-primary",document:Object(v.jsx)(C,{passengers:n,travel:A,departurePlaces:z}),fileName:"lista_viagem_".concat(G,".pdf"),children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Carregando PDF...":"Exportar PDF"}}),Object(v.jsx)("button",{type:"button",className:"btn btn-warning text-white",onClick:function(){Z.push("/viagens/".concat(G))},children:"Voltar"})]})]})})]})}},84:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.47d929e8.png"},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s}));var n=a(91),r=a.n(n),s="https://api.ldviagens.com/",c=r.a.create({baseURL:s}),o=function(e){return r.a.get("https://viacep.com.br/ws/".concat(e,"/json/"))}},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){if(e.hasOwnProperty("response")&&e.response){var t=!1;return t=!(!e.response.hasOwnProperty("status")||!e.response.status)&&401===e.response.status,e.response.hasOwnProperty("data")&&e.response.data?e.response.data.hasOwnProperty("message")&&e.response.data.message?{general:!0,error:e.response.data.message,forbidden:t}:{general:!1,error:e.response.data,forbidden:t}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:t}}return"Error: Network Error"===e.toString()?{general:!0,error:"Erro de rede, o banco de dados est\xe1 fora do ar",forbidden:!1}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:!1}}},87:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(84),c=a(98),o=(a(96),a(9)),l=a(2);function i(){return Object(l.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed mt-4",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(l.jsx)("span",{className:"navbar-toggler-icon"})})}t.a=function(e){var t=e.hamburger,a=Object(l.jsx)(c.a,{phoneNumber:localStorage.getItem("companyPhone"),textReplyTime:"Responderemos assim que poss\xedvel",message:"Ol\xe1! O que podemos fazer por voc\xea?",companyName:localStorage.getItem("companyName"),sendButton:"Enviar",placeholder:"Digite sua mensagem"});return Object(l.jsxs)(r.a.Fragment,{children:[Object(l.jsx)("header",{className:"navbar navbar-light sticky-top bg-white p-0 shadow",children:Object(l.jsxs)("div",{className:"container text-center",children:[Object(l.jsx)("img",{className:"my-3 img-menu",src:s.a,alt:"Logo"}),"none"!==t?Object(l.jsx)(i,{}):""]})}),"admin"!==Object(o.b)()?a:""]})}},88:function(e,t,a){"use strict";a(1);var n=a(55),r=a(9),s=a(2);t.a=function(){var e=[],t=Object(r.b)();return t||(e=[{key:3,name:"In\xedcio",to:"/inicio"},{key:1,name:"Login",to:"/login"},{key:2,name:"Cadastrar",to:"/registro"}]),"admin"===t&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/admin-inicial"},{key:2,name:"Dados Admin",to:"/usuarios/".concat(Object(r.a)())},{key:3,name:"Reservas",to:"/reservas"},{key:4,name:"Visualiza\xe7\xe3o de Usu\xe1rios",to:"/usuarios"},{key:5,name:"Cadastro de Viagens",to:"/viagens"},{key:6,name:"Cadastro de \xd4nibus",to:"/onibus"},{key:7,name:"Sair",to:"/sair"}]),"regular"===t&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/"},{key:2,name:"Meus Dados",to:"/usuarios/".concat(Object(r.a)())},{key:3,name:"Minhas Reservas",to:"/minhas-reservas"},{key:4,name:"Sair",to:"/sair"}]),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",children:Object(s.jsx)("div",{className:"position-sticky pt-3",children:Object(s.jsx)("ul",{className:"nav flex-column",children:e.map((function(e){return Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(n.b,{className:"nav-link","aria-current":"page",to:e.to,children:e.name})},e.key)}))})})})})}},94:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return d}));var n=a(92),r=function(e){var t=new Date(e);return{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear(),hour:t.getHours().toString().padStart(2,"0"),minute:t.getMinutes().toString().padStart(2,"0")}},s=function(e){var t=r(e),a=t.day,n=t.month,s=t.year,c=t.hour,o=t.minute;return"".concat(a,"/").concat(n,"/").concat(s," ").concat(c,":").concat(o)},c=function(e){var t=r(e),a=t.day,n=t.month,s=t.year,c=t.hour,o=t.minute;return"".concat(s,"-").concat(n,"-").concat(a,"T").concat(c,":").concat(o)},o=function(e){var t=new Date,a=new Date(e.split("/").reverse().join("-")+" 00:00:00"),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&(n-=1),n},l=function(e,t,a,r){var s,c=0,o=!1,l=Object(n.a)(e);try{for(l.s();!(s=l.n()).done;){var i=s.value;if(t>=i.initialAge&&t<=i.finalAge&&(i.lapChild&&(o=!0),i.lapChild===r)){c="normal"===a?i.value:"departure"===a?i.onlyDepartureValue:i.onlyReturnValue;break}}}catch(d){l.e(d)}finally{l.f()}return{value:c,optionLapChild:o}},i=function(e){var t={};return"pending"===e&&(t={status:e,translated:"Pendente (MP)",color:"text-warning"}),"approved"===e&&(t={status:e,translated:"Aprovado (MP)",color:"text-success"}),"authorized"===e&&(t={status:e,translated:"Pendente (MP)",color:"text-warning"}),"in_process"===e&&(t={status:e,translated:"Em Processamento (MP)",color:"text-warning"}),"in_mediation"===e&&(t={status:e,translated:"Em Disputa (MP)",color:"text-warning"}),"rejected"===e&&(t={status:e,translated:"Rejeitado (MP)",color:"text-danger"}),"cancelled"===e&&(t={status:e,translated:"Cancelado (MP)",color:"text-danger"}),"refunded"===e&&(t={status:e,translated:"Devolvido (MP)",color:"text-danger"}),"charged_back"===e&&(t={status:e,translated:"Estornado (MP)",color:"text-danger"}),"created"===e&&(t={status:e,translated:"Criado (MP)",color:"text-warning"}),"1"===e&&(t={status:e,translated:"Confirmar (Pix)",color:"text-warning"}),"2"===e&&(t={status:e,translated:"Confirmado (Pix)",color:"text-success"}),"3"===e&&(t={status:e,translated:"Confirmar (Infinite)",color:"text-warning"}),"4"===e&&(t={status:e,translated:"Confirmado (Infinite)",color:"text-success"}),"5"===e&&(t={status:e,translated:"Confirmar (Formulario)",color:"text-warning"}),"6"===e&&(t={status:e,translated:"Confirmado (Formulario)",color:"text-success"}),"7"===e&&(t={status:e,translated:"No Embarque",color:"text-success"}),"dependent"===e&&(t={status:e,translated:"Dependente",color:"text-success"}),t},d=function(e){return"email"===e?"Email":"phone"===e?"Telefone":"cpf"===e?"CPF":""}}}]);
//# sourceMappingURL=11.7161faa7.chunk.js.map