(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[11],{100:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.47d929e8.png"},101:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s}));var r=a(107),n=a.n(r),s="https://api.ldviagens.com/",c=n.a.create({baseURL:s}),o=function(e){return n.a.get("https://viacep.com.br/ws/".concat(e,"/json/"))}},102:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(e){if(e.hasOwnProperty("response")&&e.response){var t=!1;return t=!(!e.response.hasOwnProperty("status")||!e.response.status)&&401===e.response.status,e.response.hasOwnProperty("data")&&e.response.data?e.response.data.hasOwnProperty("message")&&e.response.data.message?{general:!0,error:e.response.data.message,forbidden:t}:{general:!1,error:e.response.data,forbidden:t}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:t}}return"Error: Network Error"===e.toString()?{general:!0,error:"Erro de rede, o banco de dados est\xe1 fora do ar",forbidden:!1}:{general:!0,error:"Algo errado aconteceu, tente novamente mais tarde",forbidden:!1}}},103:function(e,t,a){"use strict";var r=a(2),n=a(0),s=a.n(n),c=a(100),o=a(115),l=(a(113),a(8));function i(){return Object(r.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed mt-4",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(r.jsx)("span",{className:"navbar-toggler-icon"})})}t.a=function(e){var t=e.hamburger,a=Object(r.jsx)(o.a,{phoneNumber:localStorage.getItem("companyPhone"),textReplyTime:"Responderemos assim que poss\xedvel",message:"Ol\xe1! O que podemos fazer por voc\xea?",companyName:localStorage.getItem("companyName"),sendButton:"Enviar",placeholder:"Digite sua mensagem"});return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("header",{className:"navbar navbar-light sticky-top bg-white p-0 shadow",children:Object(r.jsxs)("div",{className:"container text-center",children:[Object(r.jsx)("img",{className:"my-3 img-menu",src:c.a,alt:"Logo"}),"none"!==t?Object(r.jsx)(i,{}):""]})}),"admin"!==Object(l.b)()?a:""]})}},104:function(e,t,a){"use strict";var r=a(2),n=(a(0),a(53)),s=a(8);t.a=function(){var e=[],t=Object(s.b)();return t||(e=[{key:1,name:"Login",to:"/login"},{key:2,name:"Cadastrar",to:"/registro"}]),"admin"===t&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/admin-inicial"},{key:2,name:"Dados Admin",to:"/usuarios/".concat(Object(s.a)())},{key:3,name:"Reservas",to:"/reservas"},{key:4,name:"Visualiza\xe7\xe3o de Usu\xe1rios",to:"/usuarios"},{key:5,name:"Cadastro de Viagens",to:"/viagens"},{key:6,name:"Cadastro de \xd4nibus",to:"/onibus"},{key:7,name:"Sair",to:"/sair"}]),"regular"===t&&(e=[{key:1,name:"P\xe1gina Inicial",to:"/"},{key:2,name:"Meus Dados",to:"/usuarios/".concat(Object(s.a)())},{key:3,name:"Minhas Reservas",to:"/minhas-reservas"},{key:4,name:"Sair",to:"/sair"}]),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",children:Object(r.jsx)("div",{className:"position-sticky pt-3",children:Object(r.jsx)("ul",{className:"nav flex-column",children:e.map((function(e){return Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(n.b,{className:"nav-link","aria-current":"page",to:e.to,children:e.name})},e.key)}))})})})})}},111:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return d}));var r=a(108),n=function(e){var t=new Date(e);return{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear(),hour:t.getHours().toString().padStart(2,"0"),minute:t.getMinutes().toString().padStart(2,"0")}},s=function(e){var t=n(e),a=t.day,r=t.month,s=t.year,c=t.hour,o=t.minute;return"".concat(a,"/").concat(r,"/").concat(s," ").concat(c,":").concat(o)},c=function(e){var t=n(e),a=t.day,r=t.month,s=t.year,c=t.hour,o=t.minute;return"".concat(s,"-").concat(r,"-").concat(a,"T").concat(c,":").concat(o)},o=function(e){var t=new Date,a=new Date(e.split("/").reverse().join("-")+" 00:00:00"),r=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&(r-=1),r},l=function(e,t,a,n){var s,c=0,o=!1,l=Object(r.a)(e);try{for(l.s();!(s=l.n()).done;){var i=s.value;if(t>=i.initialAge&&t<=i.finalAge&&(i.lapChild&&(o=!0),i.lapChild===n)){c="normal"===a?i.value:"departure"===a?i.onlyDepartureValue:i.onlyReturnValue;break}}}catch(d){l.e(d)}finally{l.f()}return{value:c,optionLapChild:o}},i=function(e){var t={};return"pending"===e&&(t={status:e,translated:"Pendente (MP)",color:"text-warning"}),"approved"===e&&(t={status:e,translated:"Aprovado (MP)",color:"text-success"}),"authorized"===e&&(t={status:e,translated:"Pendente (MP)",color:"text-warning"}),"in_process"===e&&(t={status:e,translated:"Em Processamento (MP)",color:"text-warning"}),"in_mediation"===e&&(t={status:e,translated:"Em Disputa (MP)",color:"text-warning"}),"rejected"===e&&(t={status:e,translated:"Rejeitado (MP)",color:"text-danger"}),"cancelled"===e&&(t={status:e,translated:"Cancelado (MP)",color:"text-danger"}),"refunded"===e&&(t={status:e,translated:"Devolvido (MP)",color:"text-danger"}),"charged_back"===e&&(t={status:e,translated:"Estornado (MP)",color:"text-danger"}),"created"===e&&(t={status:e,translated:"Criado (MP)",color:"text-warning"}),"1"===e&&(t={status:e,translated:"Confirmar (Pix)",color:"text-warning"}),"2"===e&&(t={status:e,translated:"Confirmado (Pix)",color:"text-success"}),"3"===e&&(t={status:e,translated:"Confirmar (Infinite)",color:"text-warning"}),"4"===e&&(t={status:e,translated:"Confirmado (Infinite)",color:"text-success"}),"5"===e&&(t={status:e,translated:"Confirmar (Formulario)",color:"text-warning"}),"6"===e&&(t={status:e,translated:"Confirmado (Formulario)",color:"text-success"}),"7"===e&&(t={status:e,translated:"No Embarque",color:"text-success"}),"dependent"===e&&(t={status:e,translated:"Dependente",color:"text-success"}),t},d=function(e){return"email"===e?"Email":"phone"===e?"Telefone":"cpf"===e?"CPF":""}},334:function(e,t){},336:function(e,t){},383:function(e,t){},384:function(e,t){},557:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(105),s=a.n(n),c=a(106),o=a(110),l=a(0),i=a.n(l),d=a(5),u=a(103),b=a(104),j=a(189),p=a(548),m=a(145),h=a(146),x=a(147),f=a(148),g=a(101),O=a(239),v=a(111),y=O.d.create({table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,margin:10},tableRow:{margin:"auto",flexDirection:"row"},tableColSmall:{width:"7%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableColMedium:{width:"19%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableColBig:{width:"30%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:10},title:{margin:10}});var C=function(e){var t=e.passengers,a=e.travel,n=e.departurePlaces;return Object(r.jsx)(O.a,{children:Object(r.jsxs)(O.c,{size:"A4",style:y.page,children:[Object(r.jsx)(O.e,{style:y.title,children:"".concat(a.destination," - ").concat(Object(v.c)(n[0].departureDate))}),Object(r.jsxs)(O.f,{style:y.table,children:[Object(r.jsxs)(O.f,{style:y.tableRow,children:[Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"P. Ida"})}),Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"P. Volta"})}),Object(r.jsx)(O.f,{style:y.tableColMedium,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"Pagamento"})}),Object(r.jsx)(O.f,{style:y.tableColBig,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"Ponto"})}),Object(r.jsx)(O.f,{style:y.tableColBig,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"Nome"})}),Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:"Colo"})})]}),t.map((function(e){var t=e.id,a=e.person,s=e.departureSeat,c=e.returnSeat,o=e.lapChild,l=e.status,i=e.departurePlace_id,d=a.name;return s||c||o?Object(r.jsxs)(O.f,{style:y.tableRow,children:[Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:s})}),Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:c})}),Object(r.jsx)(O.f,{style:y.tableColMedium,children:Object(r.jsx)(O.e,{style:y.tableCell,children:Object(v.e)(l).translated})}),Object(r.jsx)(O.f,{style:y.tableColBig,children:Object(r.jsx)(O.e,{style:y.tableCell,children:n.filter((function(e){return e.id===i}))[0].homeAddress})}),Object(r.jsx)(O.f,{style:y.tableColBig,children:Object(r.jsx)(O.e,{style:y.tableCell,children:d})}),Object(r.jsx)(O.f,{style:y.tableColSmall,children:Object(r.jsx)(O.e,{style:y.tableCell,children:o?"Sim":"N\xe3o"})})]},t):null}))]})]})})},k=a(102);t.default=function(e){var t=Object(l.useState)([]),a=Object(o.a)(t,2),n=a[0],v=a[1],y=Object(l.useState)(1),w=Object(o.a)(y,2),S=w[0],N=w[1],P=Object(l.useState)(0),M=Object(o.a)(P,2),D=M[0],E=M[1],R=Object(l.useState)(""),W=Object(o.a)(R,2),I=W[0],_=W[1],F=Object(l.useState)({}),T=Object(o.a)(F,2),A=T[0],L=T[1],B=Object(l.useState)([{}]),V=Object(o.a)(B,2),z=V[0],q=V[1],Y=Object(l.useState)({}),J=Object(o.a)(Y,2),U=J[0],H=J[1],G=e.match.params.travel_id,K=e.location.state,Q=K.travel,X=K.departurePlaces,Z=Object(d.f)();Object(l.useEffect)((function(){L(Q),q(X)}),[Q,X]),Object(l.useEffect)((function(){(function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,r,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/reservations",{headers:{travel_id:G,active:!0,currentPage:S,"x-access-token":localStorage.getItem("token"),list:"passengers"}});case 3:200===(t=e.sent).status?(E(t.data.pagination.lastPage),v(t.data.data)):E(1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(a=Object(k.a)(e.t0)).forbidden?Z.push("/"):a.general&&_(a.error);case 11:return e.prev=11,e.next=14,g.a.get("/admin-data/",{headers:{"x-access-token":localStorage.getItem("token")}});case 14:r=e.sent,n=r.data,H(n),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(11),(c=Object(k.a)(e.t1)).general&&_(c.error);case 23:case"end":return e.stop()}}),e,null,[[0,7],[11,19]])})));return function(){return e.apply(this,arguments)}})()()}),[S,G,Z]);var $=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("/reservations/".concat(t),{headers:{"x-access-token":localStorage.getItem("token")}});case 3:a=n.filter((function(e,a,r){return e.id!==t})),v(a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(r=Object(k.a)(e.t0)).general&&_(r.error);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(S-1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(S+1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(D);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(u.a,{}),Object(r.jsx)("div",{className:"container-fluid mb-4",children:Object(r.jsxs)("div",{className:"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2",children:[Object(r.jsx)(b.a,{}),Object(r.jsx)("h5",{children:"Lista de Passageiros"}),Object(r.jsx)("div",{className:"alert text-center alert-danger",role:"alert",style:I?{display:"block"}:{display:"none"},children:I}),Object(r.jsx)("div",{className:"table-responsive-sm",children:Object(r.jsxs)("table",{className:"table table-responsive-lgcd ap table-sm table-striped table-hover",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"P. Ida"}),Object(r.jsx)("th",{scope:"col",children:"P. Volta"}),Object(r.jsx)("th",{scope:"col",children:"Nome"}),Object(r.jsx)("th",{scope:"col",children:"Colo"}),Object(r.jsx)("th",{scope:"col",children:"Respons\xe1vel"}),Object(r.jsx)("th",{scope:"col",children:"Telefone"}),Object(r.jsx)("th",{scope:"col"})]},"0")}),Object(r.jsx)("tbody",{children:n.map((function(e){var t=e.id,a=e.person,n=e.departureSeat,s=e.returnSeat,c=e.lapChild,o=e.user_id,l=a.name,i=a.phone,d=a.responsible,u=i?i.length:0,b=Object(r.jsx)("a",{className:"ms-2",href:"https://api.whatsapp.com/send?phone=55".concat(i),target:"_blank",rel:"noreferrer",children:Object(r.jsx)(j.a,{style:{color:"green"}})});return n||s||c?Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:n}),Object(r.jsx)("td",{children:s}),Object(r.jsx)("td",{children:l}),Object(r.jsx)("td",{children:c?"Sim":"N\xe3o"}),Object(r.jsx)("td",{children:d||""}),Object(r.jsxs)("td",{children:[i?"(".concat(e.person.phone.substr(0,2),") ").concat(i.substr(2,10===u?4:5),"-").concat(i.substr(10===u?6:7,4)):"",i?b:""]}),Object(r.jsx)("td",{children:o===U.user_id?Object(r.jsxs)("button",{className:"btn btn-link p-0",onClick:function(){$(t)},children:[Object(r.jsx)(p.a,{})," "]}):""})]},t):""}))})]})}),Object(r.jsx)("nav",{"aria-label":"Page navigation example",children:Object(r.jsxs)("ul",{className:"pagination",children:[Object(r.jsx)("li",{className:"page-item",children:Object(r.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:1===S,onClick:ee,children:Object(r.jsx)(m.a,{})})}),Object(r.jsx)("li",{className:"page-item",children:Object(r.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:1===S,onClick:te,children:Object(r.jsx)(h.a,{})})}),Object(r.jsx)("li",{className:"page-item",children:Object(r.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:S===D,onClick:ae,children:Object(r.jsx)(x.a,{})})}),Object(r.jsx)("li",{className:"page-item",children:Object(r.jsx)("button",{type:"button",className:"btn btn-outline-primary m-1",disabled:S===D,onClick:re,children:Object(r.jsx)(f.a,{})})})]})}),Object(r.jsxs)("div",{className:"text-center d-grid gap-2",children:[Object(r.jsx)(O.b,{className:"btn btn-primary",document:Object(r.jsx)(C,{passengers:n,travel:A,departurePlaces:z}),fileName:"lista_viagem_".concat(G,".pdf"),children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Carregando PDF...":"Exportar PDF"}}),Object(r.jsx)("button",{type:"button",className:"btn btn-warning text-white",onClick:function(){Z.push("/viagens/".concat(G))},children:"Voltar"})]})]})})]})}}}]);
//# sourceMappingURL=11.4b969f0d.chunk.js.map