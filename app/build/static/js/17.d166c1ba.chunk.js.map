{"version":3,"sources":["../node_modules/react-bootstrap-icons/dist/icons/person-fill.js","components/reservation/UserReservations.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","PersonFill","forwardRef","_ref","ref","color","size","rest","React","createElement","xmlns","viewBox","width","height","fill","d","propTypes","PropTypes","string","oneOfType","number","defaultProps","UserReservations","useState","reservations","setReservations","message","setMessage","useEffect","a","api","get","headers","getUserId","localStorage","getItem","res","status","data","errorHandled","errorApi","general","error","fetchData","Fragment","NavHeader","className","Sidebar","role","style","display","map","reservation","travel","imageName","destination","departurePlace","filter","dependent_id","statusToShow","translatePaymentStatus","total","reduce","tot","person","Number","value","toFixed","src","apiUrl","alt","place","departureDate","returnDate","homeAddress","addressNumber","dateTimeBrazil","departureSeat","returnSeat","name","departure","return_","toString","replace","translated"],"mappings":"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","file":"static/js/17.d166c1ba.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar PersonFill = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      size = _ref.size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"\n  }));\n});\nPersonFill.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nPersonFill.defaultProps = {\n  color: 'currentColor',\n  size: '1em'\n};\nexport default PersonFill;","import React, { useState, useEffect} from 'react'\r\nimport NavHeader from '../nav/NavHeader'\r\nimport Sidebar from '../nav/Sidebar'\r\nimport { CalendarCheck, PersonFill } from 'react-bootstrap-icons'\r\nimport { api, apiUrl } from '../../config/api'\r\nimport { dateTimeBrazil, translatePaymentStatus } from '../../config/util'\r\nimport { getUserId } from '../../config/security'\r\nimport { errorApi } from '../../config/handleErrors'\r\n\r\nfunction UserReservations() {\r\n  const [reservations, setReservations] = useState([])\r\n  const [message, setMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await api.get('/reservations', \r\n          { headers :{\r\n            'user_id': getUserId(), \r\n            'x-access-token' : localStorage.getItem('token')\r\n          }})\r\n\r\n        if (res.status === 200) {\r\n          setReservations(res.data.data)\r\n        }\r\n      } catch (error) {  \r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.general) {\r\n          setMessage(errorHandled.error)\r\n        }\r\n      }\r\n    }\r\n    fetchData()\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavHeader />            \r\n      <div className=\"container-fluid mb-4\">\r\n        <div className=\"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2\">\r\n          <Sidebar />\r\n          \r\n          {!reservations ? <h1>Você não fez nenhuma reserva!</h1> : <h5>Minhas Reservas</h5>}\r\n\r\n          <div className='alert text-center alert-primary' role=\"alert\"\r\n               style={message ? { display: 'block'} : { display : 'none' }}>\r\n            {message}\r\n          </div>\r\n\r\n          <div className=\"mt-1 row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4 g-3\">\r\n\r\n            {reservations.map((reservation, i) => {\r\n              const { travel, reservations } = reservation\r\n              const { imageName, destination, departurePlace } = travel\r\n\r\n              const status = reservations.filter(res => (!res.dependent_id))[0].status\r\n\r\n              const statusToShow = translatePaymentStatus(status)\r\n\r\n              const total = (reservations.reduce((tot, person) => tot + Number(person.value), 0)).toFixed(2)\r\n              \r\n              return (\r\n                <div key={i} className=\"col\">\r\n                  <div className=\"card shadow-sm bg-light\">\r\n                    <img src={`${apiUrl}uploads/${imageName}`} className=\"card-img-top center-cropped\" alt={destination} />\r\n                    <div className=\"card-body\">\r\n                      <h5>{destination}</h5>\r\n                      <hr />\r\n                        {departurePlace.map((place, i) => {\r\n                          const { departureDate, returnDate, homeAddress, addressNumber } = place\r\n\r\n                          return (\r\n                            <div key={i}>\r\n                              <span className={`d-block ${i ? 'mt-2' : ''}`} >{`${homeAddress}, ${addressNumber}`}</span>\r\n                              <span><CalendarCheck />{` ${dateTimeBrazil(departureDate)} - ${dateTimeBrazil(returnDate)}`}</span>\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      <hr />\r\n                        {reservations.map((res, i) => {\r\n                          const { person, departureSeat, returnSeat } = res\r\n                          const { name } = person\r\n\r\n                          const departure = departureSeat ? `Ida: ${departureSeat}` : ''\r\n                          const return_ = returnSeat ? `Volta: ${returnSeat}` : ''\r\n\r\n                          return (\r\n                            <div key={i}>\r\n                              <span><PersonFill />{` ${name}`}</span><br />\r\n                              <span>{`Poltronas - ${departure} ${return_}`}</span>\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      <hr />\r\n                      <div>\r\n                        <span>{`Valor Total: ${total.toString().replace(\".\",\",\")}`}</span>\r\n                      </div>\r\n                      <hr />\r\n                      <div>\r\n                        <span>Pagamento: <strong className={statusToShow.color}>{statusToShow.translated}</strong></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default UserReservations\r\n"],"sourceRoot":""}