{"version":3,"sources":["components/reservation/ReturnPayment.js","assets/logo.png","config/api.js","config/handleErrors.js","components/nav/NavHeader.js","components/nav/Sidebar.js"],"names":["ReturnPayment","props","useState","message","setMessage","match","params","status","id","useEffect","put","history","useHistory","a","config","headers","localStorage","getItem","api","get","res","data","post","user_id","datetime","errorHandled","errorApi","general","error","msg","Object","entries","response","forEach","value","substr","length","Fragment","className","role","style","display","type","onClick","push","apiUrl","process","axios","create","baseURL","apiCep","cep","hasOwnProperty","forbidden","toString","Hamburger","Nav","hamburger","wpp","phoneNumber","textReplyTime","companyName","sendButton","placeholder","src","logo","alt","getUserType","Sidebar","links","key","name","to","getUserId","map","linkItem"],"mappings":"uMAuFeA,UAhFf,SAAuBC,GACrB,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEA,EAAuBH,EAAMI,MAAMC,OAA3BC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,GAEhBC,qBAAU,WACO,YAAXF,GACFG,EAAIF,KAEL,CAACD,EAAQC,IAEZ,IAAIG,EAAUC,cAERF,EAAG,uCAAG,WAAOF,GAAP,uBAAAK,EAAA,6DACJC,EAAS,CAAEC,QAAS,CACxB,iBAAmBC,aAAaC,QAAQ,WAFhC,kBAMUC,IAAIC,IAAJ,wBAAyBX,GAAMM,GANzC,cAMFM,EANE,OAQAC,EAASD,EAATC,KARA,SAUFH,IAAII,KAAK,sBAAuB,GAAI,CAAEP,QAAS,CACnD,iBAAkBC,aAAaC,QAAQ,SACvC,OAAS,EACT,QAAWI,EAAKE,QAChB,SAAYF,EAAKG,YAdX,0DAiBFC,EAAeC,YAAS,EAAD,KACZC,QACfvB,EAAWqB,EAAaG,QAEpBC,EAAM,GACVC,OAAOC,QAAQ,KAAMC,SAASX,MAAMY,SAAQ,YAAmB,IAAD,mBAAXC,GAAW,WAC5DL,GAAG,UAAOK,EAAP,UAELL,EAAMA,EAAIM,OAAO,EAAGN,EAAIO,OAAS,GACjChC,EAAWyB,IA1BL,0DAAH,sDA+BT,OACE,eAAC,IAAMQ,SAAP,WACE,cAAC,IAAD,IACA,qBAAKC,UAAU,uBAAf,SACE,sBAAKA,UAAU,6CAAf,UACE,cAAC,IAAD,IAEA,qBAAKA,UAAU,6DAA6DC,KAAK,QAC7EC,MAAOrC,EAAU,CAAEsC,QAAS,SAAW,CAAEA,QAAU,QADvD,SAEGtC,IAGH,yCAEA,uBAEY,YAAXI,EAAuB,iEAA2C,GACvD,YAAXA,EAAuB,mHAA0F,GACtG,YAAXA,EAAuB,uHAAwF,GAEhH,uBAEA,wBAAQmC,KAAK,SACLJ,UAAU,6BACVK,QAAS,WACPhC,EAAQiC,KAAK,MAHvB,8B,gCCzEK,QAA0B,kC,gCCAzC,2HAEMC,EAASC,6BAET5B,EAAM6B,IAAMC,OAAO,CACvBC,QAASJ,IAGLK,EAAS,SAAAC,GAAG,OAAKJ,IAAM5B,IAAN,mCAAsCgC,EAAtC,a,gCCRvB,sCAAMzB,EAAW,SAACE,GAChB,GAAIA,EAAMwB,eAAe,aAAexB,EAAMI,SAAU,CAEtD,IAAIqB,GAAY,EAOhB,OALEA,KADEzB,EAAMI,SAASoB,eAAe,YAAaxB,EAAMI,SAASzB,SACtB,MAA1BqB,EAAMI,SAASzB,OAKzBqB,EAAMI,SAASoB,eAAe,SAAWxB,EAAMI,SAASX,KACtDO,EAAMI,SAASX,KAAK+B,eAAe,YAAcxB,EAAMI,SAASX,KAAKlB,QAChE,CAAEwB,SAAS,EAAMC,MAAOA,EAAMI,SAASX,KAAKlB,QAASkD,aAErD,CAAE1B,SAAS,EAAOC,MAAOA,EAAMI,SAASX,KAAMgC,aAGhD,CAAE1B,SAAS,EAAMC,MAAO,oDAAqDyB,aAGtF,MAAyB,yBAArBzB,EAAM0B,WACD,CAAE3B,SAAS,EAAMC,MAAM,oDAAkDyB,WAAW,GAEpF,CAAE1B,SAAS,EAAMC,MAAM,oDAAqDyB,WAAW,K,gCCvBpG,0DAMA,SAASE,IACP,OACE,wBAAQjB,UAAU,4DAA4DI,KAAK,SAAS,iBAAe,WAAW,iBAAe,eAAe,gBAAc,cAAc,gBAAc,QAAQ,aAAW,oBAAjN,SACE,sBAAMJ,UAAU,0BA4BPkB,IAvBf,YAA6B,IAAdC,EAAa,EAAbA,UAEPC,EAAM,cAAC,IAAD,CAAgBC,YAAa3C,aAAaC,QAAQ,gBAClC2C,cAAc,sCACdzD,QAAQ,2CACR0D,YAAa7C,aAAaC,QAAQ,eAClC6C,WAAW,SACXC,YAAY,wBAExC,OACE,eAAC,IAAM1B,SAAP,WACE,wBAAQC,UAAU,qDAAlB,SACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKA,UAAU,gBAAgB0B,IAAMC,IAAOC,IAAI,SAChC,SAAdT,EAAuB,cAACF,EAAD,IAAgB,QAI1B,UAAlBY,cAA4BT,EAAM,Q,gCChCzC,+BA0DeU,IAtDf,WACE,IAAIC,EAAQ,GAEN3B,EAAOyB,cA8Bb,OA5BKzB,IACH2B,EAAQ,CACE,CAAEC,IAAK,EAAGC,KAAM,QAASC,GAAI,UAC7B,CAAEF,IAAK,EAAGC,KAAM,YAAaC,GAAI,eAIhC,UAAT9B,IACF2B,EAAQ,CACE,CAAEC,IAAK,EAAGC,KAAM,oBAAkBC,GAAI,kBACtC,CAAEF,IAAK,EAAGC,KAAM,cAAeC,GAAG,aAAD,OAAeC,gBAChD,CAAEH,IAAK,EAAGC,KAAM,WAAYC,GAAI,aAChC,CAAEF,IAAK,EAAGC,KAAM,oCAA4BC,GAAI,aAChD,CAAEF,IAAK,EAAGC,KAAM,sBAAuBC,GAAI,YAC3C,CAAEF,IAAK,EAAGC,KAAM,wBAAsBC,GAAI,WAC1C,CAAEF,IAAK,EAAGC,KAAM,OAAQC,GAAI,WAI3B,YAAT9B,IACF2B,EAAQ,CACE,CAAEC,IAAK,EAAGC,KAAM,oBAAkBC,GAAI,KACtC,CAAEF,IAAK,EAAGC,KAAM,aAAcC,GAAG,aAAD,OAAeC,gBAC/C,CAAEH,IAAK,EAAGC,KAAM,kBAAmBC,GAAI,oBACvC,CAAEF,IAAK,EAAGC,KAAM,OAAQC,GAAI,WAKtC,qBAAKlC,UAAU,MAAf,SACE,qBAAK9B,GAAG,cAAc8B,UAAU,yDAAhC,SACE,qBAAKA,UAAU,uBAAf,SACE,oBAAIA,UAAU,kBAAd,SACG+B,EAAMK,KAAI,SAACC,GACV,OACE,oBAAuBrC,UAAU,WAAjC,SACE,cAAC,IAAD,CAAMA,UAAU,WAAW,eAAa,OAAOkC,GAAIG,EAASH,GAA5D,SACGG,EAASJ,QAFLI,EAASL","file":"static/js/19.a1292fab.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport NavHeader from '../nav/NavHeader'\r\nimport Sidebar from '../nav/Sidebar'\r\nimport { api } from '../../config/api'\r\nimport { errorApi } from '../../config/handleErrors'\r\n\r\nfunction ReturnPayment(props) {\r\n  const [message, setMessage] = useState('')\r\n\r\n  const { status, id } = props.match.params\r\n\r\n  useEffect(() => {\r\n    if (status !== 'failure') {\r\n      put(id)\r\n    }\r\n  }, [status, id])\r\n\r\n  let history = useHistory()\r\n\r\n  const put = async (id) => {\r\n    const config = { headers :{\r\n      'x-access-token' : localStorage.getItem('token')\r\n    }}\r\n\r\n    try {\r\n      const res = await api.get(`/reservations/${id}`, config)\r\n\r\n      const { data } = res\r\n\r\n      await api.post('/reservations-email', {}, { headers :{\r\n        'x-access-token': localStorage.getItem('token'),\r\n        'email': true,\r\n        'user_id': data.user_id,\r\n        'datetime': data.datetime\r\n      }})\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      } else {\r\n        let msg = ''\r\n        Object.entries(error.response.data).forEach(([key, value]) => {\r\n          msg += `${value} | `\r\n        })\r\n        msg = msg.substr(0, msg.length - 3)\r\n        setMessage(msg)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavHeader />\r\n      <div className=\"container-fluid mb-4\">\r\n        <div className=\"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2\">\r\n          <Sidebar />\r\n\r\n          <div className='alert text-center alert-dismissible alert-danger fade show' role=\"alert\"\r\n              style={message ? { display: 'block'} : { display : 'none' }}>\r\n            {message}\r\n          </div>\r\n\r\n          <h5>Reserva</h5>\r\n\r\n          <br />\r\n\r\n          {status === 'success' ? <h6>Pagamento efetuado com sucesso!</h6> : ''}\r\n          {status === 'failure' ? <h6>O pagamento pagamento falhou, se desejar faça outra reserva e tente novamente!</h6> : ''}\r\n          {status === 'pending' ? <h6>O pagamento está pendente, você deverá receber um email quando for aprovado!</h6> : ''}\r\n\r\n          <br />\r\n\r\n          <button type=\"button\" \r\n                  className=\"btn btn-warning text-white\"\r\n                  onClick={() => {\r\n                    history.push('/')\r\n                  }}>\r\n            Voltar\r\n          </button>\r\n\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ReturnPayment\r\n","export default __webpack_public_path__ + \"static/media/logo.47d929e8.png\";","import axios from 'axios'\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL\r\n\r\nconst api = axios.create({\r\n  baseURL: apiUrl\r\n})\r\n\r\nconst apiCep = cep => (axios.get(`https://viacep.com.br/ws/${cep}/json/`))\r\n\r\nexport { api, apiCep, apiUrl }","const errorApi = (error) => {\r\n  if (error.hasOwnProperty('response') && error.response) {\r\n\r\n    let forbidden = false\r\n    if (error.response.hasOwnProperty('status') && error.response.status) {\r\n      forbidden = error.response.status === 401 ? true : false\r\n    } else {\r\n      forbidden = false\r\n    }\r\n\r\n    if (error.response.hasOwnProperty('data') && error.response.data) {\r\n      if (error.response.data.hasOwnProperty('message') && error.response.data.message) {\r\n        return { general: true, error: error.response.data.message, forbidden }\r\n      } else {\r\n        return { general: false, error: error.response.data, forbidden }\r\n      }\r\n    } else {\r\n      return { general: true, error: 'Algo errado aconteceu, tente novamente mais tarde', forbidden }\r\n    }\r\n  } else {\r\n    if (error.toString() === 'Error: Network Error') {\r\n      return { general: true, error:'Erro de rede, o banco de dados está fora do ar', forbidden: false }\r\n    } else {\r\n      return { general: true, error:'Algo errado aconteceu, tente novamente mais tarde', forbidden: false }\r\n    }\r\n  }\r\n}\r\n\r\nexport { errorApi }","import React from 'react'\r\nimport logo from '../../assets/logo.png'\r\nimport WhatsAppWidget from 'react-whatsapp-widget'\r\nimport 'react-whatsapp-widget/dist/index.css'\r\nimport { getUserType } from '../../config/security'\r\n\r\nfunction Hamburger() {\r\n  return (\r\n    <button className=\"navbar-toggler position-absolute d-md-none collapsed mt-4\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#sidebarMenu\" aria-controls=\"sidebarMenu\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n      <span className=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction Nav({ hamburger }) {\r\n  \r\n  const wpp = <WhatsAppWidget phoneNumber={localStorage.getItem('companyPhone')} \r\n                              textReplyTime='Responderemos assim que possível'\r\n                              message='Olá! O que podemos fazer por você?'\r\n                              companyName={localStorage.getItem('companyName')}\r\n                              sendButton='Enviar'\r\n                              placeholder='Digite sua mensagem'/>\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <header className=\"navbar navbar-light sticky-top bg-white p-0 shadow\">\r\n        <div className=\"container text-center\">\r\n          <img className=\"my-3 img-menu\" src={ logo } alt=\"Logo\" />\r\n          { hamburger !== 'none' ? <Hamburger /> : '' }\r\n        </div>\r\n      </header>\r\n\r\n      {getUserType() !== 'admin' ? wpp : ''}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Nav\r\n","import React from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { getUserId, getUserType } from '../../config/security'\r\n\r\nfunction Sidebar() {\r\n  let links = []\r\n\r\n  const type = getUserType()\r\n\r\n  if (!type) {\r\n    links = [\r\n              { key: 1, name: 'Login', to: '/login' },\r\n              { key: 2, name: 'Cadastrar', to: '/registro' }\r\n            ]\r\n  }\r\n\r\n  if (type === 'admin') {\r\n    links = [\r\n              { key: 1, name: 'Página Inicial', to: '/admin-inicial' },\r\n              { key: 2, name: 'Dados Admin', to: `/usuarios/${getUserId()}`},\r\n              { key: 3, name: 'Reservas', to: '/reservas'},\r\n              { key: 4, name: 'Visualização de Usuários', to: '/usuarios' },\r\n              { key: 5, name: 'Cadastro de Viagens', to: '/viagens' },\r\n              { key: 6, name: 'Cadastro de Ônibus', to: '/onibus' },\r\n              { key: 7, name: 'Sair', to: '/sair' }\r\n            ]\r\n  }\r\n\r\n  if (type === 'regular') {\r\n    links = [\r\n              { key: 1, name: 'Página Inicial', to: '/' },\r\n              { key: 2, name: 'Meus Dados', to: `/usuarios/${getUserId()}` },\r\n              { key: 3, name: 'Minhas Reservas', to: '/minhas-reservas' },\r\n              { key: 4, name: 'Sair', to: '/sair' }\r\n            ]\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <nav id=\"sidebarMenu\" className=\"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse\">\r\n        <div className=\"position-sticky pt-3\">\r\n          <ul className=\"nav flex-column\">\r\n            {links.map((linkItem) => {\r\n              return (\r\n                <li key={linkItem.key} className=\"nav-item\" >\r\n                  <Link className=\"nav-link\" aria-current=\"page\" to={linkItem.to}>\r\n                    {linkItem.name}\r\n                  </Link>\r\n                </li>\r\n                )\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n"],"sourceRoot":""}