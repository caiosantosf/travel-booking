[{"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\index.js":"1","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\Routes.js":"2","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\security.js":"3","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\Login.js":"4","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\EmailResetPassword.js":"5","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\UserHome.js":"6","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\User.js":"7","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\ResetPassword.js":"8","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\bus\\Buses.js":"9","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\admin\\AdminHome.js":"10","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\Users.js":"11","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\bus\\Bus.js":"12","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Travel.js":"13","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Value.js":"14","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Passenger.js":"15","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\ReturnPayment.js":"16","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Payment.js":"17","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\Reservation.js":"18","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\UserReservations.js":"19","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\environment\\Forbidden.js":"20","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\DeparturePlace.js":"21","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Travels.js":"22","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\environment\\ToRegister.js":"23","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\api.js":"24","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\util.js":"25","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\handleErrors.js":"26","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\nav\\NavHeader.js":"27","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\nav\\Sidebar.js":"28","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Passengers.js":"29","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Payments.js":"30","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\InactiveReservations.js":"31","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\PassengersPDF.js":"32"},{"size":340,"mtime":1611863791419,"results":"33","hashOfConfig":"34"},{"size":5791,"mtime":1630169705075,"results":"35","hashOfConfig":"34"},{"size":460,"mtime":1612989339875,"results":"36","hashOfConfig":"34"},{"size":5117,"mtime":1614191985866,"results":"37","hashOfConfig":"34"},{"size":2889,"mtime":1614192265034,"results":"38","hashOfConfig":"34"},{"size":7030,"mtime":1625777821483,"results":"39","hashOfConfig":"34"},{"size":30455,"mtime":1625412156147,"results":"40","hashOfConfig":"34"},{"size":3953,"mtime":1625781246490,"results":"41","hashOfConfig":"34"},{"size":4823,"mtime":1614189502344,"results":"42","hashOfConfig":"34"},{"size":530,"mtime":1613760115622,"results":"43","hashOfConfig":"34"},{"size":4963,"mtime":1614190842942,"results":"44","hashOfConfig":"34"},{"size":6604,"mtime":1614192537512,"results":"45","hashOfConfig":"34"},{"size":16429,"mtime":1625403992514,"results":"46","hashOfConfig":"34"},{"size":9012,"mtime":1614192571700,"results":"47","hashOfConfig":"34"},{"size":5007,"mtime":1614711960284,"results":"48","hashOfConfig":"34"},{"size":2540,"mtime":1625697073466,"results":"49","hashOfConfig":"34"},{"size":6660,"mtime":1625783515530,"results":"50","hashOfConfig":"34"},{"size":35281,"mtime":1625700283612,"results":"51","hashOfConfig":"34"},{"size":4524,"mtime":1614717311589,"results":"52","hashOfConfig":"34"},{"size":854,"mtime":1612962982424,"results":"53","hashOfConfig":"34"},{"size":13589,"mtime":1614701751967,"results":"54","hashOfConfig":"34"},{"size":5158,"mtime":1614192645305,"results":"55","hashOfConfig":"34"},{"size":1238,"mtime":1612979897610,"results":"56","hashOfConfig":"34"},{"size":238,"mtime":1614803179547,"results":"57","hashOfConfig":"34"},{"size":3970,"mtime":1625778345737,"results":"58","hashOfConfig":"34"},{"size":1112,"mtime":1614192032156,"results":"59","hashOfConfig":"34"},{"size":1472,"mtime":1624715283631,"results":"60","hashOfConfig":"34"},{"size":1924,"mtime":1613677665078,"results":"61","hashOfConfig":"34"},{"size":8149,"mtime":1625609710131,"results":"62","hashOfConfig":"34"},{"size":7297,"mtime":1625783176322,"results":"63","hashOfConfig":"34"},{"size":6372,"mtime":1625609440117,"results":"64","hashOfConfig":"34"},{"size":3688,"mtime":1625778891339,"results":"65","hashOfConfig":"34"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"3g5vre",{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"68"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\index.js",[],["132","133"],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\Routes.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\security.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\Login.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\EmailResetPassword.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\UserHome.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\User.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\ResetPassword.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\bus\\Buses.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\admin\\AdminHome.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\user\\Users.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\bus\\Bus.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Travel.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Value.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Passenger.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\ReturnPayment.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Payment.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\Reservation.js",["134"],"import React, { useState, useEffect } from 'react'\r\nimport { useHistory, Link } from \"react-router-dom\"\r\nimport NavHeader from '../nav/NavHeader'\r\nimport Sidebar from '../nav/Sidebar'\r\nimport { api } from '../../config/api'\r\nimport { dateTimeBrazil, dateTimeDefault, calculateAge, calculateValue, translatePixKeyType } from '../../config/util'\r\nimport { getUserId } from '../../config/security'\r\nimport { PersonXFill } from 'react-bootstrap-icons'\r\nimport { errorApi } from '../../config/handleErrors'\r\nimport InputMask from 'react-input-mask'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nfunction Reservation(props) {\r\n  const [message, setMessage] = useState('')\r\n  const [loadingSave, setLoadingSave] = useState(false)\r\n  const [values, setValues] = useState([])\r\n  const [departurePlaces, setDeparturePlaces] = useState([])\r\n  const [hasOnlyDeparture, setHasOnlyDeparture] = useState(false)\r\n  const [hasOnlyReturn, setHasOnlyReturn] = useState(false)\r\n  const [user, setUser] = useState({name: '', document: '', documentType: '', value: '0.00'})\r\n  const [dependents, setDependents] = useState([])\r\n  const [travelType, setTravelType] = useState('normal')\r\n  const [departurePlace, setDeparturePlace] = useState()\r\n  const [total, setTotal] = useState('0.00')\r\n  const [status, setStatus] = useState(1)\r\n  const [seats, setSeats] = useState([])\r\n  const [controlsSeats, setControlsSeats] = useState(false)\r\n  const [peopleSeats, setPeopleSeats] = useState([{ person: {}, seats: [], departurePosition: '', returnPosition: '' }])\r\n  const [windowAllowed, setWindowAllowed] = useState(0)\r\n  const [windowAmount, setWindowAmount] = useState({ departureSelected: 0, returnSelected: 0 })\r\n  const [seatsSelected, setSeatsSelected] = useState({ departure: [], return: [] })\r\n  const [adminData, setAdminData] = useState({})\r\n  const [reservation, setReservation] = useState(null)\r\n  const [notes, setNotes] = useState()\r\n  const [description, setDescription] = useState()\r\n  const [departurePayment, setDeparturePayment] = useState()\r\n  \r\n  const { travel_id, random } = props.match.params\r\n\r\n  let history = useHistory()\r\n\r\n  const resetState = () => {\r\n    setMessage('')\r\n    setLoadingSave(false)\r\n    setValues([])\r\n    setDeparturePlaces([])\r\n    setHasOnlyDeparture(false)\r\n    setHasOnlyReturn(false)\r\n    setUser({name: '', document: '', documentType: '', value: '0.00'})\r\n    setDependents([])\r\n    setTravelType('normal')\r\n    setDeparturePlace()\r\n    setTotal('0.00')\r\n    setSeats([])\r\n    setControlsSeats(false)\r\n    setPeopleSeats([{ person: {}, seats: [], departurePosition: '', returnPosition: '' }])\r\n    setWindowAllowed(0)\r\n    setWindowAmount({ departureSelected: 0, returnSelected: 0 })\r\n    setSeatsSelected({ departure: [], return: [] })\r\n    setAdminData({})\r\n    setReservation(null)\r\n    setNotes(null)\r\n    setDescription(null)\r\n    setDeparturePayment(null)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setStatus(1)\r\n  }, [random])\r\n\r\n  useEffect(() => {\r\n    resetState()\r\n    const fetchData = async () => {\r\n\r\n      try {\r\n        const res = await api.get(`/travels/${travel_id}`,\r\n        { headers :{\r\n          'x-access-token' : localStorage.getItem('token')\r\n        }})\r\n\r\n        const { data } = res\r\n        setControlsSeats(data.controlsSeats)\r\n        setValues(data.values)\r\n        setDeparturePlaces(data.departurePlaces)\r\n        setNotes(data.notes)\r\n        setDescription(data.description)\r\n        setDeparturePayment(data.departurePayment)\r\n\r\n        if (data.controlsSeats) {\r\n          setSeats(data.seats)\r\n        }\r\n\r\n        setDeparturePlace(data.departurePlaces[0].id)\r\n\r\n        data.values.forEach(val => {\r\n          if (val.finalAge === 99) {\r\n            if (val.onlyDepartureValue > 0) {\r\n              setHasOnlyDeparture(true)\r\n            }\r\n            if (val.onlyReturnValue > 0) {\r\n              setHasOnlyReturn(true)\r\n            }\r\n          }\r\n        })\r\n      } catch (error) {\r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.general) {\r\n          setMessage(errorHandled.error)\r\n        }\r\n      }\r\n\r\n      try {\r\n        const res = await api.get(`/admin-data/`, \r\n        { headers :{\r\n          'x-access-token' : localStorage.getItem('token')\r\n        }})\r\n\r\n        const { data } = res\r\n        setAdminData(data)\r\n      } catch (error) {\r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.general) {\r\n          setMessage(errorHandled.error)\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [travel_id])\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await api.get(`/users/${getUserId()}`, \r\n          { headers :{\r\n            'x-access-token' : localStorage.getItem('token')\r\n          }})\r\n\r\n        const { data } = res\r\n\r\n        data.birth = dateTimeBrazil(data.birth).substr(0, 10)\r\n        data.age = calculateAge(data.birth)\r\n        data.value = calculateValue(values, data.age, travelType, false).value\r\n\r\n        setUser(data)\r\n      } catch (error) {\r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.general) {\r\n          setMessage(errorHandled.error)\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [travelType, values])\r\n\r\n  useEffect(() => {\r\n    let auxTotal = dependents.reduce((tot, dependent) => tot + Number(dependent.value), 0)\r\n    auxTotal += user.type === 'regular' ? Number(user.value) : 0\r\n    setTotal((auxTotal).toFixed(2))\r\n  }, [dependents, user])\r\n\r\n  const handleContinue = async () => {\r\n    if (status === 1) {\r\n      if (controlsSeats) {\r\n\r\n        let peopleSeatsAux = []\r\n        let dependentsAux = dependents.slice(0)\r\n        let hasError = false\r\n        let count = 0\r\n        \r\n        setDependents(dependentsAux)\r\n\r\n        if (user.type !== 'admin') {\r\n          peopleSeatsAux.push({ index: 0, person: user, seats: seats.slice(0), departurePosition: '', returnPosition: '' })\r\n          count++\r\n        }\r\n\r\n        for (let [index, person] of dependents.entries()) {\r\n          if (!person.name) {\r\n            dependentsAux[index].error = { name: 'O Nome é obrigatório' }\r\n            hasError = true\r\n          }\r\n          if (!person.birth) {\r\n            dependentsAux[index].error = { birth: 'A Data de Nascimento é obrigatória' }\r\n            hasError = true\r\n          }\r\n          if (!person.document) {\r\n            dependentsAux[index].error = { document: 'O Documento é obrigatório' }\r\n            hasError = true\r\n          }\r\n          if (!hasError) {\r\n            if (user.type !== 'admin') {\r\n              index++\r\n            }\r\n            peopleSeatsAux.push({ index, person, seats: seats.slice(0), departurePosition: '', returnPosition: '' })  \r\n          }\r\n          count++\r\n        }\r\n\r\n        if (!hasError) {        \r\n          setPeopleSeats(peopleSeatsAux)\r\n\r\n          setMessage('')\r\n\r\n          if (count) {\r\n            setStatus(2)\r\n          } else {\r\n            setMessage('Insira ao menos um passageiro')\r\n          }\r\n        }\r\n      } else {\r\n        setStatus(3)\r\n      }\r\n    } \r\n    if (status === 2) {\r\n      setMessage('')\r\n      let nextStep = true\r\n\r\n      for (const ps of peopleSeats) {\r\n        if (!ps.person.lapChild) {\r\n          if (!ps.departureSeat && (travelType === 'normal' || travelType === 'departure')) {\r\n            setMessage('Selecione todas as suas poltronas')\r\n            nextStep = false\r\n            break\r\n          }\r\n          if (!ps.returnSeat && (travelType === 'normal' || travelType === 'return')) {\r\n            setMessage('Selecione todas as suas poltronas')\r\n            nextStep = false\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      if (nextStep) {\r\n        if (user.type === 'admin') {\r\n          save('admin')\r\n          history.push('/')\r\n         } else {\r\n          if (adminData.mercadoPago) {\r\n            handleMercadoPagoPayment()\r\n          }\r\n         }\r\n        setStatus(3)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleBack = () => {\r\n    if (status === 1 || status === 4) {\r\n      history.push('/')\r\n    }\r\n    if (status === 2) {\r\n      setStatus(1)\r\n    }\r\n    if (status === 3) {\r\n      if (controlsSeats) {\r\n        setStatus(2)\r\n      } else {\r\n        setStatus(1)\r\n      }\r\n    }\r\n  }\r\n\r\n  const put = async (paymentOption, id, datetime) => {\r\n    const config = { headers :{\r\n      'x-access-token' : localStorage.getItem('token')\r\n    }}\r\n\r\n    try {\r\n      await api.put(`/reservations/${id}`, { status: paymentOption }, config)\r\n\r\n      if (user.type !== 'admin') {\r\n        try {\r\n          await api.post('/reservations-email', {}, { headers :{\r\n            'x-access-token': localStorage.getItem('token'),\r\n            'email': true,\r\n            'user_id': user.id,\r\n            'datetime': datetime\r\n          }})\r\n        } catch (error) {\r\n          const errorHandled = errorApi(error)\r\n          if (errorHandled.general) {\r\n            setMessage(errorHandled.error)\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      } else {\r\n        let msg = ''\r\n        Object.entries(error.response.data).forEach(([key, value]) => {\r\n          msg += `${value} | `\r\n        })\r\n        msg = msg.substr(0, msg.length - 3)\r\n        setMessage(msg)\r\n      }\r\n    }\r\n  }\r\n\r\n  const save = async (paymentOption) => {\r\n    setLoadingSave(true)\r\n    setMessage('')\r\n\r\n    const config = { headers :{\r\n      'x-access-token' : localStorage.getItem('token')\r\n    }}\r\n\r\n    if (reservation) {\r\n      await api.delete(`/reservations/${reservation.id}`, config)\r\n    }\r\n\r\n    const datetime = dateTimeDefault(new Date())\r\n    setReservation({ ...reservation, datetime })\r\n\r\n    let returnSeat = 0\r\n    let departureSeat = 0\r\n\r\n    for (const ps of peopleSeats) {\r\n      if (ps.person.type) {\r\n        returnSeat = ps.returnSeat\r\n        departureSeat = ps.departureSeat\r\n        break\r\n      }\r\n    }\r\n\r\n    let id = 0\r\n\r\n    try {\r\n      const res = await api.post('/reservations', {\r\n        travel_id: Number(travel_id), \r\n        user_id: user.id, \r\n        departureSeat, \r\n        datetime,\r\n        returnSeat, \r\n        value: Number(user.value), \r\n        status: paymentOption, \r\n        travelType, \r\n        departurePlace_id: departurePlace,\r\n        lapChild: false,\r\n        active: true\r\n      }, config)\r\n\r\n      id = res.data.id\r\n\r\n      setReservation({ ...reservation, id})\r\n    } catch (error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      } else {\r\n        let msg = ''\r\n        Object.entries(error.response.data).forEach(([key, value]) => {\r\n          msg += `${value} | `\r\n        })\r\n        msg = msg.substr(0, msg.length - 3)\r\n        setMessage(msg)\r\n      }\r\n    }\r\n    \r\n    for (const [i, dependent] of dependents.entries()) {\r\n      let dependentsAux = dependents.slice(0)\r\n      dependentsAux[i].error = {}\r\n      setDependents(dependentsAux)\r\n\r\n      try {\r\n        let { name, documentType, birth, document, value, lapChild } = dependent\r\n\r\n        const dateParts = birth.split('/')\r\n        birth = `${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`\r\n\r\n        const res = await api.post('/dependents', { name, documentType, document, birth }, config)    \r\n        \r\n        let indexDependent = i \r\n        \r\n        if (user.type !== 'admin') {\r\n          indexDependent++\r\n        }\r\n        \r\n        returnSeat = lapChild ? 0 : peopleSeats[indexDependent].returnSeat\r\n        departureSeat = lapChild ? 0 : peopleSeats[indexDependent].departureSeat\r\n\r\n        if (res.status === 201) {\r\n\r\n          try {\r\n            await api.post('/reservations', {\r\n              travel_id: Number(travel_id), \r\n              user_id: user.id, \r\n              dependent_id: res.data.id, \r\n              datetime,\r\n              departureSeat, \r\n              returnSeat, \r\n              value: Number(value), \r\n              status: \"dependent\", \r\n              travelType, \r\n              departurePlace_id: departurePlace, \r\n              lapChild: lapChild ? true : false,\r\n              active: true\r\n            }, config)\r\n          } catch (error) {\r\n            const errorHandled = errorApi(error)\r\n            if (errorHandled.general) {\r\n              setMessage(errorHandled.error)\r\n            } else {\r\n              let msg = ''\r\n              Object.entries(error.response.data).forEach(([key, value]) => {\r\n                msg += `${value} | `\r\n              })\r\n              msg = msg.substr(0, msg.length - 3)\r\n              setMessage(msg)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        const errorHandled = errorApi(error)\r\n        if (errorHandled.general) {\r\n          setMessage(errorHandled.error)\r\n        } else {\r\n          setMessage('Corrija as informações inválidas')\r\n\r\n          let dependentsAux = dependents.slice(0)\r\n          dependentsAux[i].error = errorHandled.error\r\n          setDependents(dependentsAux)\r\n        }\r\n      }  \r\n    }\r\n\r\n    setLoadingSave(false)\r\n\r\n    return { id, datetime }\r\n  }\r\n\r\n  const handleCompanyPayment = async () => {\r\n    let res = null\r\n    if (!adminData.mercadoPago){\r\n      res = await save('5')\r\n    }\r\n\r\n    await put('5', reservation ? reservation.id : res.id, reservation ? reservation.datetime : res.datetime)\r\n\r\n    const link = adminData.companyPaymentLink.replace('email@email.com', user.email)\r\n                                             .replace('@numeroreserva', reservation.id || 0)\r\n                                             .replace('@nome', user.name)\r\n                                             .replace('@cpf', user.cpf)\r\n                                             .replace('@documento', user.document)\r\n                                             .replace('@valor', total.toString().replace(\".\",\",\"))\r\n    \r\n    window.open(link, \"_blank\")\r\n\r\n    setStatus(4)\r\n    resetState()\r\n  }\r\n\r\n  const handlePixPayment = async () => {\r\n    let res = null\r\n    if (!adminData.mercadoPago){\r\n      res = await save('1')\r\n    }\r\n\r\n    await put('1', reservation ? reservation.id : res.id, reservation ? reservation.datetime : res.datetime)\r\n\r\n    setStatus(4)\r\n    resetState()\r\n  }\r\n\r\n  const handleDeparturePayment = async () => {\r\n    let res = null\r\n    if (!adminData.mercadoPago){\r\n      res = await save('7')\r\n    }\r\n\r\n    await put('7', reservation ? reservation.id : res.id, reservation ? reservation.datetime : res.datetime)\r\n\r\n    setStatus(4)\r\n    resetState()\r\n  }\r\n\r\n  const handleInfinitePayPayment = async () => {\r\n    let res = null\r\n    if (!adminData.mercadoPago){\r\n      res = await save('3')\r\n    }\r\n\r\n    await put('3', reservation ? reservation.id : res.id, reservation ? reservation.datetime : res.datetime)\r\n    \r\n    const link = `https://pay.infinitepay.io/${adminData.infinitePayUser}/${total.replace(\".\",\",\")}`\r\n\r\n    window.open(link, \"_blank\")\r\n\r\n    setStatus(4)\r\n    resetState()\r\n  }\r\n\r\n  const handleMercadoPagoPayment = async () => {\r\n    const id = await save('created')\r\n    setReservation({ ...reservation, id })\r\n\r\n    try {\r\n      const res = await api.post(`/reservations/payment/mercadopago/${user.id}/${id}`, {\r\n        description,\r\n        total\r\n      }, { headers :{\r\n        'x-access-token' : localStorage.getItem('token')\r\n      }})\r\n\r\n      const script = document.createElement('script')\r\n\r\n      script.src = 'https://www.mercadopago.com.br/integrations/v1/web-payment-checkout.js'\r\n      script.dataset.preferenceId = res.data.id      \r\n\r\n      document.querySelector(\"#mercadoPago\").appendChild(script)\r\n    } catch(error) {\r\n      const errorHandled = errorApi(error)\r\n      if (errorHandled.general) {\r\n        setMessage(errorHandled.error)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAddPerson = async () => {\r\n    let dependentsAux = dependents.slice(0)\r\n    dependentsAux.push({name: '', document: '', documentType: 'RG', birth: '', error: {}, value: '0.00', optionLapChild: false})\r\n    setDependents(dependentsAux)\r\n  }\r\n\r\n  const handleDestroyPerson = async i => {\r\n    let dependentsAux = dependents.slice(0)\r\n    dependentsAux.splice(i, 1)\r\n    setDependents(dependentsAux)\r\n  }\r\n\r\n  const handleAgeCalculations = i => {\r\n    try {\r\n      const { birth } = dependents[i]\r\n      const age = calculateAge(birth)\r\n      const { value, optionLapChild } = calculateValue(values, age, travelType, false)\r\n\r\n      let dependentsAux = dependents.slice(0)\r\n      dependentsAux[i].age = age\r\n      dependentsAux[i].optionLapChild = optionLapChild\r\n      dependentsAux[i].value = value\r\n\r\n      setDependents(dependentsAux)\r\n    } catch (error) {\r\n      let dependentsAux = dependents.slice(0)\r\n      const birth = error.message\r\n      dependentsAux[i].error = { birth }\r\n      setDependents(dependentsAux)\r\n    }\r\n  }\r\n\r\n  const handleLapChildOption = i => {\r\n    const { age, lapChild } = dependents[i]\r\n    const { value } = calculateValue(values, age, travelType, lapChild)\r\n\r\n    let dependentsAux = dependents.slice(0)\r\n    dependentsAux[i].value = value\r\n\r\n    setDependents(dependentsAux)\r\n  }\r\n\r\n  const onlyDepartureReturn = option => {\r\n    return (\r\n      <div className=\"form-check\">\r\n        <input  className=\"form-check-input\" \r\n                type=\"radio\" \r\n                name=\"radioTravelType\" \r\n                id={`radio${option}`}\r\n                value={option}\r\n                onChange={e => {\r\n                  setTravelType(e.target.value)\r\n                }}\r\n        />\r\n        <label className=\"form-check-label\" htmlFor=\"radioDeparture\">\r\n          {option === 'departure' ? 'Só Ida' : 'Só Volta'}\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    let departureSelected = 0\r\n    let returnSelected = 0\r\n    let departure = []\r\n    let return_ = []\r\n\r\n    const allowed = peopleSeats.length === 1 ? 1 : Math.ceil(peopleSeats.length / 2)\r\n    setWindowAllowed(allowed)\r\n\r\n    for (const ps of peopleSeats) {\r\n      if (ps.departurePosition.indexOf('window') !== -1) {\r\n        departureSelected += 1\r\n      }\r\n\r\n      if (ps.returnPosition.indexOf('window') !== -1) {\r\n        returnSelected += 1\r\n      }\r\n\r\n      if (ps.departureSeat) {\r\n        departure.push(ps.departureSeat)\r\n      }\r\n      \r\n      if (ps.returnSeat) {\r\n        return_.push(ps.returnSeat)\r\n      }\r\n    }\r\n\r\n    setWindowAmount({ departureSelected, returnSelected })\r\n    setSeatsSelected({ departure, return: return_ })\r\n  }, [peopleSeats])\r\n\r\n  const handleSelectSeat = (personSeats, type, seat, position) => {\r\n    const { index } = personSeats\r\n\r\n    let peopleSeatsAux = peopleSeats.slice(0)\r\n\r\n    if (type === 'departure') {\r\n      peopleSeatsAux[index].departureSeat = seat\r\n      peopleSeatsAux[index].departurePosition = position\r\n    } else {\r\n      peopleSeatsAux[index].returnSeat = seat\r\n      peopleSeatsAux[index].returnPosition = position\r\n    }\r\n\r\n    setPeopleSeats(peopleSeatsAux)\r\n  }\r\n\r\n  const lapChild = (dependent, i) => {\r\n    return (\r\n      <div className=\"col-lg-2\">\r\n        <select type=\"text\" \r\n                className={`form-select form-select-sm ${dependent.error.lapChild ? 'is-invalid' : ''}`}\r\n                value={dependents[i].lapChild || false}\r\n                onChange={e => {\r\n                  let dependentsAux = dependents.slice(0)\r\n                  dependentsAux[i].lapChild = e.target.value === 'true' ? true : false\r\n                  setDependents(dependentsAux)\r\n                  handleLapChildOption(i)\r\n                }}\r\n        >\r\n          <option value={true}>Vai no Colo</option>\r\n          <option value={false}>Vai em Poltrona</option>\r\n        </select>\r\n\r\n        <div id=\"validationLapChild\" \r\n          className=\"invalid-feedback\" \r\n          style={dependent.error.lapChild ? { display: 'inline' } : { display: 'none' }}>\r\n          {dependent.error.lapChild}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const formReservationDetails = \r\n    <form id=\"reservationDetails\" className=\"row g-3 mt-1 mb-3\">\r\n      <div className=\"col-md-12\">\r\n        <h6>Detalhes</h6>\r\n        <div>{notes}</div>\r\n      </div>\r\n\r\n      <div className=\"col-md-12\">\r\n        <h6>Tipo de viagem</h6>\r\n\r\n        <div className=\"form-check\">\r\n          <input className=\"form-check-input\" type=\"radio\" name=\"radioTravelType\" id=\"radioDepartureReturn\" \r\n            value=\"normal\"\r\n            onChange={e => {\r\n              setTravelType(e.target.value)\r\n            }}\r\n            defaultChecked\r\n            disabled={!hasOnlyDeparture && !hasOnlyReturn ? true : false} \r\n          />\r\n\r\n          <label className=\"form-check-label\" htmlFor=\"radioDepartureReturn\">\r\n            Ida e Volta\r\n          </label>\r\n        </div>\r\n\r\n        {hasOnlyDeparture ? onlyDepartureReturn('departure') : ''}\r\n        {hasOnlyReturn ? onlyDepartureReturn('return') : ''}\r\n        \r\n      </div>\r\n\r\n      <div className=\"col-md-12\">\r\n        <h6>Escolha o ponto de saída / retorno</h6>\r\n\r\n        {departurePlaces.map((place, i) => {\r\n          const { id, departureDate, returnDate, city, homeAddress, addressNumber, state } = place\r\n\r\n          return (\r\n            <div className=\"form-check\" key={id}>\r\n              <input className=\"form-check-input\" type=\"radio\" name=\"radioPlace\" id={`radioPlace${id}`} \r\n                defaultChecked={i === 0 ? true : false} \r\n                disabled={departurePlaces.length === 1 ? true : false} \r\n                value={id}\r\n                onChange={e => {\r\n                  setDeparturePlace(e.target.value)\r\n                }}\r\n              />\r\n              <label className=\"form-check-label\" htmlFor={`radioPlace${id}`}>\r\n                {`${homeAddress}, ${addressNumber}, ${city}-${state}`}\r\n                <br /> \r\n                {`${dateTimeBrazil(departureDate)} - ${dateTimeBrazil(returnDate)}`}\r\n              </label>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"col-md-12\">\r\n        <h6>Passageiros</h6>\r\n\r\n        <span className={`${user.type === 'admin' ? 'd-none' : 'd-block'} mb-1`}>\r\n          {`${user.name} - ${user.documentType} ${user.document}`}\r\n        </span>\r\n\r\n        <span className={`${user.type === 'admin' ? 'd-none' : 'd-block'} mb-2`}>\r\n          {`R$ ${user.value.toString().replace(\".\",\",\")}`}\r\n        </span>\r\n\r\n        <button type=\"button\" \r\n                className=\"btn btn-primary\"\r\n                onClick={handleAddPerson}>\r\n          Adicionar Passageiro\r\n        </button>\r\n\r\n        {dependents.map((dependent, i) => {\r\n\r\n          return (\r\n            <div className={`row g-3 ${i === 0 ? 'mt-1' : ''}`} key={i}>\r\n              \r\n              <div className=\"col-lg-4\">\r\n                <div className=\"d-flex\">\r\n                  <Link onClick={() => {handleDestroyPerson(i)}} to=\"#\">\r\n                    <PersonXFill className=\"icon me-2\" size={30}/>\r\n                  </Link>\r\n                  <input  type=\"text\" \r\n                          className={`form-control form-control-sm ${dependent.error.dependentName ? 'is-invalid' : ''}`}\r\n                          maxLength='255' \r\n                          placeholder=\"Nome\"\r\n                          value={dependents[i].name || ''}\r\n                          onChange={e => {\r\n                            let dependentsAux = dependents.slice(0)\r\n                            dependentsAux[i].name = e.target.value\r\n                            setDependents(dependentsAux)\r\n                          }}\r\n                  />\r\n                </div>\r\n                \r\n                <div id=\"validationName\" \r\n                  className=\"invalid-feedback\" \r\n                  style={dependent.error.dependentName ? { display: 'inline' } : { display: 'none' }}>\r\n                  {dependent.error.dependentName}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-2\">\r\n                <InputMask \r\n                  mask=\"99/99/9999\" \r\n                  className={`form-control form-control-sm ${dependent.error.birth ? 'is-invalid' : ''}`}\r\n                  placeholder=\"Nascimento\"\r\n                  value={dependents[i].birth || ''}\r\n                  onBlur={() => handleAgeCalculations(i)}\r\n                  onChange={e => {\r\n                    let dependentsAux = dependents.slice(0)\r\n                    dependentsAux[i].birth = e.target.value\r\n                    setDependents(dependentsAux)\r\n                  }}\r\n                >\r\n                  {inputProps => <input {...inputProps} type=\"tel\" />}\r\n                </InputMask>\r\n\r\n                <div id=\"validationBirth\" \r\n                  className=\"invalid-feedback\" \r\n                  style={dependent.error.birth ? { display: 'inline' } : { display: 'none' }}>\r\n                  {dependent.error.birth}\r\n                </div>\r\n              </div>\r\n\r\n              { dependent.optionLapChild ? lapChild(dependent, i) : '' }\r\n\r\n              <div className=\"col-lg-2\">\r\n                <select type=\"text\" \r\n                        className={`form-select form-select-sm ${dependent.error.documentType ? 'is-invalid' : ''}`}\r\n                        value={dependents[i].documentType || ''}\r\n                        onChange={e => {\r\n                          let dependentsAux = dependents.slice(0)\r\n                          dependentsAux[i].documentType = e.target.value\r\n                          setDependents(dependentsAux)\r\n                        }}\r\n                >\r\n                  <option value=\"RG\">RG</option>\r\n                  <option value=\"CNH\">CNH</option>\r\n                  <option value=\"CN\">C. Nascimento</option>\r\n                </select>\r\n\r\n                <div id=\"validationDocumentType\" \r\n                  className=\"invalid-feedback\" \r\n                  style={dependent.error.documentType ? { display: 'inline' } : { display: 'none' }}>\r\n                  {dependent.error.documentType}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-2\">\r\n                <input  type=\"text\" \r\n                        className={`form-control form-control-sm ${dependent.error.document ? 'is-invalid' : ''}`} \r\n                        maxLength='32' \r\n                        placeholder=\"Documento\"\r\n                        value={dependents[i].document || ''}\r\n                        onChange={e => {\r\n                          let dependentsAux = dependents.slice(0)\r\n                          dependentsAux[i].document = e.target.value\r\n                          setDependents(dependentsAux)\r\n                        }}\r\n                />\r\n\r\n                <div id=\"validationDocument\" \r\n                  className=\"invalid-feedback\" \r\n                  style={dependent.error.document ? { display: 'inline' } : { display: 'none' }}>\r\n                  {dependent.error.document}\r\n                </div>\r\n              </div>\r\n\r\n              <span className=\"d-block value-span\">{`R$ ${dependent.value.toString().replace(\".\",\",\")}`}</span>\r\n              <hr className={`value-separator ${i + 1 === dependents.length ? 'd-none' : ''}`} />\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </form>\r\n\r\n  const seatRow = (personSeats, type) => {\r\n    const { person, departureSeat, returnSeat, departurePosition, returnPosition } = personSeats\r\n    const { name } = person\r\n\r\n    return (\r\n      <div className=\"col\">\r\n        <span>{`${name} - ${type === 'departure' ? 'Ida' : 'Volta'}`}</span>\r\n\r\n        <div className=\"m-0 row row-cols-5 mt-1\">\r\n\r\n          {personSeats.seats.map((s, i) => {\r\n            const { seat, position, departureAvailable, returnAvailable } = s\r\n\r\n            let disabled = false\r\n            let classBtn = 'btn-primary'\r\n\r\n            const classMargin = position === 'corridorRight'\r\n                                ? 'ms-3 m-1'\r\n                                : position  === 'windowLeft' || !position\r\n                                  ? 'windowLeft'\r\n                                  : 'm-1'\r\n\r\n            if (type === 'departure') {\r\n              if (departureSeat === seat) {\r\n                classBtn = 'btn-warning text-white'\r\n              } else {\r\n                if (!departureAvailable || seatsSelected.departure.includes(seat)) {\r\n                  disabled = true\r\n                } else {\r\n                  if (position.indexOf('window') !== -1 && departurePosition.indexOf('window') === -1) {\r\n                    if (windowAllowed <= windowAmount.departureSelected) {\r\n                      disabled = true\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              if (returnSeat === seat) {\r\n                classBtn = 'btn-warning text-white'\r\n              } else {\r\n                if (!returnAvailable || seatsSelected.return.includes(seat)) {\r\n                  disabled = true\r\n                } else {\r\n                  if (position.indexOf('window') !== -1 && returnPosition.indexOf('window') === -1) {\r\n                    if (windowAllowed <= windowAmount.returnSelected) {\r\n                      disabled = true\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            const className = `btn btn-sm mb-1 ${classMargin} ${classBtn}`\r\n\r\n            return (\r\n              seat ?\r\n                <button key={i} type=\"button\" \r\n                        onClick={() => handleSelectSeat(personSeats, type, seat, position)}\r\n                        disabled={disabled}\r\n                        className={className}>\r\n                  {seat}\r\n                </button>\r\n              :\r\n                <div className={classMargin}></div>\r\n            )\r\n          })}\r\n\r\n        </div>\r\n        <hr />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const formSeatsChoice = \r\n    <form id=\"seatsChoice\" className=\"row g-3 mt-1 mb-4\">\r\n      <h6>Escolha de Poltronas</h6>\r\n\r\n      <div className=\"row mt-0 g-3 row-cols-1 row-cols-md-1 row-cols-lg-2\">\r\n        {peopleSeats.map(p => {\r\n          if (!p.person.lapChild) {\r\n            if (travelType === 'normal') {\r\n              return ['departure', 'return'].map(type => {\r\n                return seatRow(p, type)\r\n              })\r\n            } else {\r\n              return [travelType].map(type => {\r\n                return seatRow(p, type)\r\n              })\r\n            }\r\n          } \r\n          return ''\r\n        })}\r\n      </div>\r\n    </form>\r\n\r\n  const formPayment =\r\n    <div id=\"payment\" className=\"row g-3 mt-1 mb-4\">\r\n      <h6>Pagamento</h6>\r\n\r\n      <span>Sua reserva foi salva!</span>\r\n\r\n      <div className={`col-md-12 ${!departurePayment ? 'd-none' : ''}`}>\r\n        <button type=\"button\" \r\n                className=\"btn btn-primary mb-2\"\r\n                onClick={handleDeparturePayment}>\r\n          Pagamento no Embarque\r\n        </button>\r\n        <br />\r\n        <span>Ao escolher esta opção você ficará responsável por pagar o valor total na hora do embarque no ônibus</span>\r\n      </div>\r\n\r\n      <div className={`col-md-12 ${!adminData.pix ? 'd-none' : ''}`}>\r\n        <button type=\"button\" \r\n                className=\"btn btn-primary mb-2\"\r\n                data-bs-toggle=\"modal\" data-bs-target=\"#pixModal\">\r\n          Pagamento por Pix\r\n        </button>\r\n        <br />\r\n      </div>\r\n\r\n      <div class=\"modal fade\" id=\"pixModal\" tabindex=\"-1\" aria-labelledby=\"pixModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"pixModalLabel\">Pix</h5>\r\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              Chave Pix: {translatePixKeyType(adminData.pixKeyType)} - {adminData.pixKey}\r\n              <br />\r\n              Valor Total: R$ {total.replace(\".\",\",\")}\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" onClick={handlePixPayment}>Confirmar</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className={`col-md-12 ${!adminData.companyPayment ? 'd-none' : ''}`}>\r\n        <button type=\"button\" \r\n                className=\"btn btn-primary mb-2\"\r\n                onClick={handleCompanyPayment}>\r\n          Pagamento Direto com a Empresa\r\n        </button>\r\n        <br />\r\n      </div>\r\n\r\n      <div className={`col-md-12 ${!adminData.infinitePay ? 'd-none' : ''}`}>\r\n        <button type=\"button\" \r\n                className=\"btn btn-primary mb-2\"\r\n                onClick={handleInfinitePayPayment}>\r\n          Pagamento pelo InfinitePay\r\n        </button>\r\n        <br />\r\n      </div>\r\n\r\n      <div className={`col-md-12 ${!adminData.mercadoPago ? 'd-none' : ''}`}>\r\n        <div id=\"mercadoPago\"></div>\r\n        <span>Espere até que apareça um botão acima, ao clicar nele será aberta uma tela externa ao aplivativo para seguir com o pagamento pelo MercadoPago</span>\r\n      </div>\r\n    </div>\r\n\r\n  const formSuccess =\r\n    <form id=\"payment\" className=\"row g-3 mt-1 mb-4\">\r\n      <div className=\"col-md-12\">\r\n        <h5>Você receberá um email quando seu pagamento for confirmado, você tambem poderá sempre revisar todas as informações sobre a reserva pelo menu \"Minhas Reservas\"</h5>\r\n        <h6>Caso queira falar conosco utilize o botão WhatsApp abaixo</h6>\r\n      </div>\r\n    </form>\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavHeader />\r\n      <div className=\"container-fluid mb-4\">\r\n        <div className=\"mt-4 col-md-9 ms-sm-auto col-lg-10 px-md-2\">\r\n          <Sidebar />\r\n\r\n          <h5>Reserva</h5>\r\n\r\n          {status === 1 ? formReservationDetails : ''}\r\n          {status === 2 ? formSeatsChoice : ''}\r\n          {status === 3 ? formPayment : ''}\r\n          {status === 4 ? formSuccess : ''}\r\n\r\n          <span className={`${status === 4 ? 'd-none' : 'd-block'} fs-5 mb-3`}>{`Total R$ ${total.toString().replace(\".\",\",\")}`}</span>\r\n\r\n          <div className='alert text-center alert-dismissible alert-danger fade show' role=\"alert\"\r\n              style={message ? { display: 'block'} : { display : 'none' }}>\r\n            {message}\r\n          </div>\r\n\r\n          <div className=\"text-center d-grid gap-2\">\r\n            <button type=\"button\" \r\n                    className={`btn btn-primary ${(status === 3 || status === 4) ? 'd-none' : ''}`}\r\n                    onClick={handleContinue}\r\n                    disabled={loadingSave}>\r\n              <span className=\"spinner-border spinner-border-sm mx-1\" \r\n                    role=\"status\" \r\n                    aria-hidden=\"true\" \r\n                    style={loadingSave ? { display: 'inline-block'} : { display : 'none' }}>\r\n              </span>\r\n              Continuar\r\n            </button>\r\n\r\n            <button type=\"button\" \r\n                    className=\"btn btn-warning text-white\"\r\n                    onClick={handleBack}>\r\n              Voltar\r\n            </button>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Reservation\r\n","C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\reservation\\UserReservations.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\environment\\Forbidden.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\DeparturePlace.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Travels.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\environment\\ToRegister.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\api.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\util.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\config\\handleErrors.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\nav\\NavHeader.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\nav\\Sidebar.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Passengers.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\Payments.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\InactiveReservations.js",[],"C:\\Users\\PICHAU\\Documents\\Dev\\travel-booking\\app\\src\\components\\travel\\PassengersPDF.js",[],{"ruleId":"135","replacedBy":"136"},{"ruleId":"137","replacedBy":"138"},{"ruleId":"139","severity":1,"message":"140","line":11,"column":16,"nodeType":"141","messageId":"142","endLine":11,"endColumn":22},"no-native-reassign",["143"],"no-negated-in-lhs",["144"],"no-unused-vars","'uuidv4' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]